/* 
	*
	*
	jAlert v.3
	Made with love by Versatility Werks (http://flwebsites.biz)
	MIT Licensed
	*
	*
*/
;(function($){$.fn.jAlert=function(options){var alert=this,themes=['default','green','red','black','blue','yellow'],sizes=['xsm','sm','md','lg','xlg','full'],backgroundColors=['white','black'],styles=[],classes=['animated'],backgroundClasses=[];if(alert.length>1){alert.each(function(){$(this).jAlert(alert.options);});return this;}
alert.options=$.extend({},$.fn.jAlert.defaults,options);alert.instance=false;if(alert.options.type=='confirm')
{if(!alert.options.content)
{alert.options.content=alert.options.confirmQuestion;}
alert.options.btns=[{'text':alert.options.confirmBtnText,'theme':'green','class':'confirmBtn','closeAlert':true,'onClick':alert.options.onConfirm},{'text':alert.options.denyBtnText,'theme':'red','class':'denyBtn','closeAlert':true,'onClick':alert.options.onDeny}];alert.options.autofocus=alert.options.confirmAutofocus;}
if($.inArray(alert.options.theme,themes)==-1)
{console.log('jAlert Config Error: Invalid theme selection.');return false;}
classes.push('ja_'+alert.options.theme);if(!alert.options.id)
{var unique=Date.now().toString()+Math.floor(Math.random()*100000);alert.options.id='ja_'+unique;}
if(alert.options.class)
{classes.push(alert.options.class);}
if(alert.options.classes)
{classes.push(alert.options.classes);}
if(!alert.options.title)
{classes.push('ja_noTitle');}
if(alert.options.size&&((typeof alert.options.size=='string'&&$.inArray(alert.options.size,sizes)==-1)||(typeof alert.options.size=='object'&&(typeof alert.options.size.width=='undefined'||typeof alert.options.size.height=='undefined'))))
{console.log('jAlert Config Error: Invalid size selection (try a preset or make sure you\'re including height and width in your size object).');return false;}
else if(!alert.options.size)
{classes.push('ja_sm');}
else if(typeof alert.options.size=='object')
{styles.push('width: '+alert.options.size.width+';');styles.push('height: '+alert.options.size.height+';');}
else
{classes.push('ja_'+alert.options.size);}
if($.inArray(alert.options.backgroundColor,backgroundColors)==-1)
{console.log('jAlert Config Error: Invalid background color selection.');return false;}
backgroundClasses.push('ja_wrap_'+alert.options.backgroundColor);if((typeof alert.options.btns=='object'||typeof alert.options.btns=='array')||alert.options.autofocus){alert.options.closeOnClick=false;}
alert.options.onOpen=[alert.options.onOpen];var onload="onload='$.fn.jAlert.mediaLoaded($(this))'",loader="<div class='ja_loader'>Loading...</div>";if(alert.options.image)
{alert.options.content="<div class='ja_media_wrap'>"+
loader+"<img src='"+alert.options.image+"' class='ja_img' "+onload+"'";if(alert.options.imageWidth)
{alert.options.content+=" style='width: "+alert.options.imageWidth+"'";}
alert.options.content+=">"+"</div>";}
else if(alert.options.video)
{alert.options.content="<div class='ja_media_wrap'>"+
loader+"<div class='ja_video'>"+"</div>"+"</div>";alert.options.onOpen.unshift(function(alert){var iframe=document.createElement("iframe");iframe.src=alert.options.video;if(iframe.attachEvent){iframe.attachEvent("onload",function(){$.fn.jAlert.mediaLoaded($(this));});}else{iframe.onload=function(){$.fn.jAlert.mediaLoaded($(this));};}
alert.find('.ja_video').append(iframe);});}
else if(alert.options.iframe)
{if(!alert.options.iframeHeight)
{alert.options.iframeHeight=$(window).height()*0.9+'px';}
alert.options.content="<div class='ja_media_wrap'>"+
loader+"</div>";alert.options.onOpen.unshift(function(alert){var iframe=document.createElement("iframe");iframe.src=alert.options.iframe;iframe.height=alert.options.iframeHeight;iframe.className='ja_iframe';if(iframe.attachEvent){iframe.attachEvent("onload",function(){$.fn.jAlert.mediaLoaded($(this));});}else{iframe.onload=function(){$.fn.jAlert.mediaLoaded($(this));};}
alert.find('.ja_media_wrap').append(iframe);});}
else if(alert.options.ajax)
{alert.options.content="<div class='ja_media_wrap'>"+
loader+"</div>";onAjaxCallbacks=alert.options.onOpen;alert.options.onOpen=[function(alert){$.ajax(alert.options.ajax,{async:true,complete:function(jqXHR,textStatus)
{alert.find('.ja_media_wrap').replaceWith(jqXHR.responseText);$.each(onAjaxCallbacks,function(index,onAjax){onAjax(alert);});},error:function(jqXHR,textStatus,errorThrown)
{alert.options.onAjaxFail(alert,'Error getting content: Code: '+jqXHR.status+' : Msg: '+jqXHR.statusText);}});}];}
alert.centerAlert=function()
{var viewportHeight=$(window).height(),alertHeight=alert.instance.height(),diff=viewportHeight-alertHeight;var top=diff/2;if(top>200)
{top=top-100;}
if(top<=0)
{top=0;}
alert.instance.css('margin-top',top+'px');if(diff>5)
{alert.instance.parents('.ja_wrap').css('position','fixed');$('body').css('overflow','hidden');}
else
{alert.instance.parents('.ja_wrap').css('position','absolute');$('body').css('overflow','auto');$('html, body').animate({scrollTop:top-50},200);}}
var animateAlert=function(which,thisAlert){if(which=='hide')
{thisAlert.removeClass(alert.options.showAnimation).addClass(alert.options.hideAnimation);}
else
{thisAlert.centerAlert();thisAlert.addClass(alert.options.showAnimation).removeClass(alert.options.hideAnimation).show();}}
var getBtnHTML=function(btn){if(typeof btn.href=='undefined'){btn.href='';}
if(typeof btn.class=='undefined'){btn.class='';}
if(typeof btn.theme=='undefined'){btn.class+=' ja_btn_default';}else{btn.class+=' ja_btn_'+btn.theme;}
if(typeof btn.text=='undefined'){btn.text='';}
if(typeof btn.id=='undefined'){var unique=Date.now().toString()+Math.floor(Math.random()*100000);btn.id='ja_btn_'+unique;}
if(typeof btn.target=='undefined'){btn.target='_self';}
if(typeof btn.closeAlert=='undefined'){btn.closeAlert=true;}
$('body').on('click','#'+btn.id,function(e){var button=$(this);if(btn.closeAlert)
{button.parents('.jAlert').closeAlert();}
var callbackResponse=true;if(typeof btn.onClick=='function')
{callbackResponse=btn.onClick(e,button);}
if(!callbackResponse||btn.closeAlert)
{e.preventDefault();return false;}
return callbackResponse;});return"<a href='"+btn.href+"' id='"+btn.id+"' target='"+btn.target+"' class='ja_btn "+btn.class+"'>"+btn.text+"</a> ";}
alert.closeAlert=function(remove,onClose){var alertInstance=$(this);if(remove!=false)
{remove=true;}
if(alertInstance.length)
{alertInstance.unbind('DOMSubtreeModified');animateAlert('hide',alertInstance);window.setTimeout(function()
{var alertWrap=alertInstance.parents('.ja_wrap');if(remove)
{alertWrap.remove();}
else
{alertWrap.hide();}
if(typeof onClose=='function')
{onClose(alertInstance);}
else if(typeof alert.options.onClose=='function')
{alert.options.onClose(alertInstance);}
if($('.jAlert').length>0)
{$('.jAlert:last').centerAlert();}
else
{$('body').css('overflow','auto');}},alert.options.animationTimeout);}
return this;}
alert.showAlert=function(replaceOthers,removeOthers,onOpen,onClose){var alertInstance=$(this);if(replaceOthers!=false)
{replaceOthers=true;}
if(removeOthers!==false)
{removeOthers=true;}
if(replaceOthers)
{$('.jAlert:visible').closeAlert(removeOthers);}
var wrap=alertInstance.parents('.ja_wrap');$('body').append(wrap);animateAlert('show',alertInstance);if(typeof onClose=='function')
{alert.options.onClose=onClose;}
window.setTimeout(function(){if(typeof onOpen=='function')
{onOpen(alertInstance);}},alert.options.animationTimeout);}
var addAlert=function(content){var html='';html+='<div class="ja_wrap '+backgroundClasses.join(' ')+'">'+'<div class="jAlert '+classes.join(' ')+'" style="'+styles.join(' ')+'" id="'+alert.options.id+'">'+'<div>';if(alert.options.closeBtn)
{html+="<div class='closejAlert ja_close";if(alert.options.closeBtnAlt)
{html+=' ja_close_alt';}
html+="'>X</div>";}
if(alert.options.title)
{html+="<div class='ja_title'><div>"+alert.options.title+"</div></div>";}
html+='<div class="ja_body">'+content;if(alert.options.btns)
{html+='<div class="ja_btn_wrap ';if(alert.options.btnBackground)
{html+='optBack';}
html+='">';}
if(typeof alert.options.btns[0]=='object')
{$.each(alert.options.btns,function(index,btn){if(typeof btn=='object')
{html+=getBtnHTML(btn);}});}
else if(typeof alert.options.btns=='object')
{html+=getBtnHTML(alert.options.btns);}
else if(alert.options.btns)
{console.log('jAlert Config Error: Incorrect value for btns (must be object or array of objects): '+alert.options.btns);}
if(alert.options.btns)
{html+='</div>';}
html+='</div>'+'</div>'+'</div>'+'</div>';var alertHTML=$(html);if(alert.options.replaceOtherAlerts)
{$('.jAlert:visible').closeAlert();}
$('body').append(alertHTML);alert.instance=$('#'+alert.options.id);animateAlert('show',alert.instance);if(alert.options.closeBtn){alert.instance.on('click','.closejAlert',function(e){e.preventDefault();$(this).parents('.jAlert').closeAlert();return false;});}
if(alert.options.closeOnClick){$(document).off('mouseup');$(document).on('mouseup',function(e){var lastVisibleAlert=$('.jAlert:visible:last');if(lastVisibleAlert.options.closeOnClick)
{lastVisibleAlert.closeAlert();}});}
if(alert.options.closeOnEsc){$(document).off('keydown');$(document).on('keydown',function(e){if(e.keyCode===27){var lastVisibleAlert=$('.jAlert:visible:last');if(lastVisibleAlert.options.closeOnEsc)
{lastVisibleAlert.closeAlert();}}});}
if(alert.options.onOpen)
{$.each(alert.options.onOpen,function(index,onOpen){onOpen(alert.instance);});}
if(alert.options.autofocus)
{alert.instance.find(alert.options.autofocus).focus();}
alert.instance.bind("DOMSubtreeModified",function(){alert.instance.centerAlert();});return alert.instance;};alert.initialize=function(){if(!alert.options.content&&!alert.options.image&&!alert.options.video&&!alert.options.iframe&&!alert.options.ajax)
{console.log('jAlert potential error: No content defined');return addAlert('');}
else
{if(!alert.options.content)
{alert.options.content='';}
return addAlert(alert.options.content);}}
alert.initialize();return alert;};$.fn.jAlert.defaults={'title':false,'content':false,'image':false,'imageWidth':'auto','video':false,'ajax':false,'onAjaxFail':function(alert,errorThrown){alert.closeAlert();errorAlert(errorThrown);},'iframe':false,'iframeHeight':false,'class':'','classes':'','id':false,'showAnimation':'bounceIn','hideAnimation':'bounceOut','animationTimeout':600,'theme':'default','backgroundColor':'black','size':false,'replaceOtherAlerts':false,'closeOnClick':false,'closeOnEsc':true,'closeBtn':true,'closeBtnAlt':false,'btns':false,'btnBackground':true,'autofocus':false,'onOpen':function(alert){return false;},'onClose':function(alert){return false;},'type':'modal','confirmQuestion':'Are you sure?','confirmBtnText':'Yes','denyBtnText':'No','confirmAutofocus':'.confirmBtn','onConfirm':function(e,btn){e.preventDefault();console.log('confirmed');return false;},'onDeny':function(e,btn){e.preventDefault();return false;}}
$.jAlert=function(options){return $.fn.jAlert(options);}
$.fn.alertOnClick=function(options)
{$(this).on('click',function(e){e.preventDefault();$.jAlert(options);return false;});}
$.alertOnClick=function(selector,options)
{$('body').on('click',selector,function(e){e.preventDefault();$.jAlert(options);return false;});}
var $jAlertResizeTimeout;$(window).resize(function(){window.clearTimeout($jAlertResizeTimeout);$jAlertResizeTimeout=window.setTimeout(function(){$('.jAlert:visible').each(function(){$(this).centerAlert();});},200);});$.fn.jAlert.mediaLoaded=function(elem){var wrap=elem.parents('.ja_media_wrap'),vid_wrap=wrap.find('.ja_video');wrap.find('.ja_loader').remove();if(vid_wrap.length>0)
{vid_wrap.fadeIn('fast');}
else
{elem.fadeIn('fast');}
elem.parents('.jAlert').centerAlert();}})(jQuery);