(function(b,a){var c=b(a);b.fn.lazyload=function(e){var g=this;var d="";var h;var f={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:a,data_attribute:"original",skip_invisible:true,appear:null,load:null};function i(){var j=0;g.each(function(){var k=b(this);if(f.skip_invisible&&!k.is(":visible")){return;}if(b.abovethetop(this,f)||b.leftofbegin(this,f)){}else{if(!b.belowthefold(this,f)&&!b.rightoffold(this,f)){}else{if(++j>f.failure_limit){return false;}}}});}if(e){if(undefined!==e.failurelimit){e.failure_limit=e.failurelimit;delete e.failurelimit;}if(undefined!==e.effectspeed){e.effect_speed=e.effectspeed;delete e.effectspeed;}b.extend(f,e);}h=(f.container===undefined||f.container===a)?c:b(f.container);if(0===f.event.indexOf("scroll")){h.bind(f.event,function(j){if(d){clearTimeout(d);}d=setTimeout(function(k){return i();},100);});}this.each(function(){var j=this;var k=b(j);j.loaded=false;k.one("appear",function(){if(!this.loaded){if(f.appear){var l=g.length;f.appear.call(j,l,f);}b("<img />").bind("load",function(){k.hide().attr("src",k.data(f.data_attribute))[f.effect](f.effect_speed);j.loaded=true;var m=b.grep(g,function(o){return !o.loaded;});g=b(m);if(f.load){var n=g.length;f.load.call(j,n,f);}}).attr("src",k.data(f.data_attribute));}});if(0!==f.event.indexOf("scroll")){k.bind(f.event,function(l){if(!j.loaded){k.trigger("appear");}});}});c.bind("resize",function(j){i();});i();return this;};b.belowthefold=function(e,f){var d;if(f.container===undefined||f.container===a){d=c.height()+c.scrollTop();}else{d=b(f.container).offset().top+b(f.container).height();}return d<=b(e).offset().top-f.threshold;};b.rightoffold=function(e,f){var d;if(f.container===undefined||f.container===a){d=c.width()+c.scrollLeft();}else{d=b(f.container).offset().left+b(f.container).width();}return d<=b(e).offset().left-f.threshold;};b.abovethetop=function(e,f){var d;if(f.container===undefined||f.container===a){d=c.scrollTop();}else{d=b(f.container).offset().top;}return d>=b(e).offset().top+f.threshold+b(e).height();};b.leftofbegin=function(e,f){var d;if(f.container===undefined||f.container===a){d=c.scrollLeft();}else{d=b(f.container).offset().left;}return d>=b(e).offset().left+f.threshold+b(e).width();};b.inviewport=function(d,e){return !b.rightofscreen(d,e)&&!b.leftofscreen(d,e)&&!b.belowthefold(d,e)&&!b.abovethetop(d,e);};b.extend(b.expr[":"],{"below-the-fold":function(d){return b.belowthefold(d,{threshold:0});},"above-the-top":function(d){return !b.belowthefold(d,{threshold:0});},"right-of-screen":function(d){return b.rightoffold(d,{threshold:0});},"left-of-screen":function(d){return !b.rightoffold(d,{threshold:0});},"in-viewport":function(d){return !b.inviewport(d,{threshold:0});},"above-the-fold":function(d){return !b.belowthefold(d,{threshold:0});},"right-of-fold":function(d){return b.rightoffold(d,{threshold:0});},"left-of-fold":function(d){return !b.rightoffold(d,{threshold:0});}});})(jQuery,window);