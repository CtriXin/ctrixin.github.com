/** m.tv.sohu.com, v1.0.0 ,time  20141031 10:13:21, sohu inc */
!function(){window.sohutv={isJump:!1,ua:navigator.userAgent,plat:{},getQueryString:function(a){var b=new RegExp("(^|&?)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!==c?unescape(c[2]):null},getQueryJsonData:function(){var a=window.location.search.substr(1);a=a.replace(/^\?+/,"").replace(/&amp;/,"&");for(var b,c=a.split("&"),d=c.length,e={};d--;)if(b=c[d].split("="),b[0]){var f=b[1]||"";try{f=decodeURIComponent(f)}catch(g){f=unescape(f)}e[decodeURIComponent(b[0])]=f}return e},blankFun:function(){},getAsyncScript:function(a,b){var c=document.getElementsByTagName("head")[0]||document.body,d=document.createElement("script");d.async="true",d.src=a,b&&(d.onload=b),c.appendChild(d)},getScript:function(a,b,c){var d=document.getElementsByTagName("head")[0]||document.body,e=document.createElement("script"),f=!1;e.type="text/javascript",e.src=a,e.onload=e.onreadystatechange=function(){f||this.readyState&&"loading"===this.readyState||(f=!0,b&&b.apply(null,c||[]),e.onload=e.onreadystatechange=null,d.removeChild(e))},d.appendChild(e)},getCSS:function(a){var b=document.getElementsByTagName("head")[0]||document.body,c=document.createElement("link");c.href=a,c.rel="stylesheet",c.type="text/css",b.appendChild(c)},addPlat:function(){var a=navigator.userAgent,b=document.getElementsByTagName("html")[0],c=[];this.plat.IsAdr=!(!/Android|HTC|Adr/i.test(a)&&!(navigator.platform+"").match(/Linux/i)),this.plat.IsIPad=!this.plat.isAdr&&/iPad/i.test(a),this.plat.IsIPhone=!this.plat.isAdr&&/iPod|iPhone/i.test(a),this.plat.IsWindowsPhone=/Windows Phone/i.test(a),this.plat.IsIOS=this.plat.IsIPad||this.plat.IsIPhone,this.plat.IsWindowsPad=/Windows Pad/i.test(a),this.plat.IsWeixin=!(!window.WeixinJSBridge&&!/MicroMessenger/i.test(a)),this.plat.IsQQ=!!/MQQBrowser/i.test(a),this.plat.IsUC=!!/UCBrowser/i.test(a),this.plat.IsMi=!!/MiuiBrowser/i.test(a),this.plat.IsSafari=!(!a.match(/Safari/i)||this.plat.IsAdr),this.plat.IsChrome=!(!a.match(/Chrome/i)||this.plat.IsAdr),this.plat.IsBaidu=!!/baidubrowser/i.test(a),this.plat.isAdr?c.push("android"):this.plat.isAdr?c.push("windows_phone"):this.plat.isAdr?c.push("iPhone"):this.plat.isAdr&&c.push("iPad"),b.className=c.join(" ")},jumpSite:function(a){var b=navigator.userAgent,c=a.from||"";c=c.toLowerCase()+"";var d=location.href;try{this.isJump||!/MicroMessenger/i.test(b)&&"sogou"!==c||(this.isJump=!0,/http:\/\/m\.(tv|s)\.sohu\.com/i.test(d)&&(location.href=location.href.replace(/http:\/\/m\.(tv|s)\.sohu\.com/i,"http://wx.m.tv.sohu.com")))}catch(e){console.log(e)}return this.isJump},initPage:function(){var a=this.getQueryJsonData()||{};this.addPlat(),this.jumpSite(a)}},sohutv.initPage()}(),function(){"use strict";var a={level:"info",dateFormat:"yyyyMMdd hh:mm:ss",DOM:null,line:'<p class="Console-line"></p>',tgt:'<div id="Console-log" style="max-height: 200px;-webkit-overflow-scrolling:touch;overflow:auto;line-height:1.5;z-index:5000;position:fixed;left:0;top:0;width:70%;font-size:11px;background:rgba(0,0,0,.8);color:#fff;"></div>',style:"<style>.Console-line{ margin-top:-1px;padding:.5em;border-top:1px solid rgba(255,255,255,.3);width:70% } .c_info .c_log { color:white; } .c_error { color:red; } .c_warn { color:yellow; } .c_debug { color:green; } </style>",inited:!1};a.util={},a.util.getType=function(a){var b,c=a;return("object"==(b=typeof c)?null===c&&"null"||Object.prototype.toString.call(c).slice(8,-1):b).toLowerCase()},a.util.DateFormat=function(a,b){var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1===RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b},a.applyData=function(a){a.alisLevel=a.level.toUpperCase().substring(0,1);var b=[" [ ",a.level," ] "].join("");return b},a.getTimestamp=function(){return a.util.DateFormat(new Date,a.dateFormat)},a.output=function(b,c){try{a.inited||a.init();var d=document.createElement("div");d.className="c_"+b.level.toLowerCase()||"c_info",d.innerHTML=a.applyData(b)+" "+c,a.DOM.appendChild(d)}catch(e){console.log("exception :"+c)}},a._logObj=function(b){var c=b||"INFO",d={timestamp:a.getTimestamp(),level:c};return d},a.log=function(b){var c=a._logObj("LOG");a.output(c,b)},a.debug=function(b){var c=a._logObj("DEBUG");a.output(c,b)},a.info=function(b){var c=a._logObj("INFO");a.output(c,b)},a.error=function(b){var c=a._logObj("ERROR");a.output(c,b)},a.warn=function(b){var c=a._logObj("WARN");a.output(c,b)},a.convertToText=function(a){var b;try{return a?"true"===a||("false"===a?!1:"null"===a?null:/^0/.test(a)||isNaN(b=Number(a))?/^\[\[\{]/.test(a)?JSON.stringify(a):a:b):a.toString()}catch(c){return a}},a.init=function(){if(!a.inited){var b=document.createElement("style");b.innerHTML=a.style,document.body.appendChild(b);var c=document.createElement("div");c.innerHTML=a.tgt,document.body.appendChild(c),a.DOM=document.getElementById("Console-log"),a.inited=!0}},window.Console=a}();var ENABLE_DEBUG=!1,API_KEY="f351515304020cad28c92f70f002261c",API_URL="/api/",API_PARAMS={api_key:API_KEY,plat:"17",sver:"4.0",partner:"78"},autoTrace=!0,TIPS_CODE={100:"该内容不存在,为您推荐其他视频"},API_PROXY_URL="http://m.tv.sohu.com/api/",H5_URL="http://h5.tv.sohu.com/",H5_TEST_URL="http://h5.tv.sohu.com/";ENABLE_DEBUG&&(H5_URL="http://t.m.tv.sohu.com/");var SohutvJSBridge="undefined"==typeof SohutvJSBridge?{}:SohutvJSBridge;"undefined"==typeof ENABLE_DEBUG&&(ENABLE_DEBUG=1);var DEBUG=ENABLE_DEBUG=!1,Channeled="",GlobalVideoDatas={},DOC=document,WIN=window,UNDEFINED=void 0,IsTouch="ontouchstart"in WIN,UA=WIN.navigator.userAgent,AdrPadRegex=/pad|XiaoMi\/MiPad|lepad|MediaPad|GT-P|SM-T|sch-i800|Nexus\s7|Nexus\s8|Nexus\s11|Kindle Fire HD|Tablet/i,IsAndroid=!(!/Android|HTC|Adr/i.test(UA)&&!(WIN.navigator.platform+"").match(/Linux/i)),IsAndroidPad=!(!IsAndroid||!AdrPadRegex.test(UA)),IsIPad=!IsAndroid&&/iPad/i.test(UA),IsIPhone=!IsAndroid&&/iPod|iPhone/i.test(UA),IsIOS=IsIPad||IsIPhone,IsWindowsPhone=/Windows Phone/i.test(UA),IsWindowsPad=/Windows Pad/i.test(UA),IsBlackBerry=/BB10|BlackBerry/i.test(UA),IsIEMobile=/IEMobile/i.test(UA),IsSymbian=/Symbian/i.test(UA),IsIE=!!DOC.all,IsSafari=!(!UA.match(/Safari/i)||IsAndroid),IsChrome=!(!UA.match(/Chrome/i)||IsAndroid),IsWeixin=!(!WIN.WeixinJSBridge&&!/MicroMessenger/i.test(UA)),IsQQ=!!/MQQBrowser/i.test(UA),IsUC=!!/UCBrowser/i.test(UA),IsMi=!!/MiuiBrowser/i.test(UA),IsBaidu=!!/baidubrowser/i.test(UA),PixelRatio=parseFloat(WIN.devicePixelRatio)||1,MAX_TOUCHMOVE_DISTANCE_FOR_CLICK=IsAndroid?10:6,START_EVENT=IsTouch?"touchstart":"mousedown",MOVE_EVENT=IsTouch?"touchmove":"mousemove",END_EVENT=IsTouch?"touchend":"mouseup",RESIZE_EVENT="onorientationchange"in WIN?"orientationchange":"resize",CANCEL_EVENT=IsTouch?"touchcancel":"mouseup",CssTransitions="WebKitTransitionEvent"in WIN,CssHas3d="WebKitCSSMatrix"in WIN&&"m11"in new WebKitCSSMatrix,RequestAnimationFrame="webkitRequestAnimationFrame"in WIN,AndroidApk="",DownloadLink="",StartClient,getDevicePixelRatio=function(){var a=1;try{a=void 0!==window.screen.systemXDPI&&void 0!==window.screen.logicalXDPI&&window.screen.systemXDPI>window.screen.logicalXDPI?window.screen.systemXDPI/window.screen.logicalXDPI:void 0!==window.devicePixelRatio?window.devicePixelRatio:window.devicePixelRatio,a=parseFloat(a)||1}catch(b){}return a};PixelRatio=getDevicePixelRatio();var IsShouSou=location.host.indexOf("m.sohu.com")>-1,ScreenSizeCorrect=1,isGpad=function(){var a=1,b=!1,c=1,d=Math.floor(window.screen.width*c),e=Math.floor(window.screen.height*c),f=1;try{a=Math.sqrt(d*d+e*e),f=parseFloat(a/(160*PixelRatio))}catch(g){}if("ontouchstart"in window&&IsAndroid){var h=!!AdrPadRegex.test(UA);h?b=!0:!b&&(a>=2500||f>7.8)&&(b=!0)}return b};IsAndroidPad=isGpad();var EnterDisableAction=!1;if(String.prototype.hasOwnProperty("trim")||(String.prototype.trim=function(){return this.replace(/^(\s|\r|\n|\r\n)*|(\s|\r|\n|\r\n)*$/g,"")}),Function.prototype.hasOwnProperty("bind")||(Function.prototype.bind=function(a){var b=this,c=arguments.length>1?Array.slice(arguments,1):null;return function(){return b.apply(a||this,c)}}),!IsTouch&&IsIE)try{DOC.execCommand("BackgroundImageCache",!1,!0)}catch(e){console.log("BackgroundImageCache hover",e)}IsAndroid&&(WIN.screen.width/WIN.innerWidth).toFixed(2)==PixelRatio.toFixed(2)&&(ScreenSizeCorrect=1/PixelRatio);var APP_VER={AndroidPhone:"4.3",AndroidPad:"3.5",iPhone:"4.3",iPad:"4.3",WindowsPhone:"3.0",WindowsPad:"3.0"},IS_EXTERNAL_PLAYER=!1;(location.href.match(/player=1/i)||location.host.indexOf("m.sohu.com")>-1)&&(IS_EXTERNAL_PLAYER=!0);var IsUC=!1;(UA.match(/ UC(Browser)?/i)||UA.match(/compatible;Android/i))&&(UA.match(/ LT15i /i)||(IsUC=!0));var IsQQBrowser=UA.match(/MQQBrowser/i),h5Src="",WebRoot="";"m.s.sohu.com"==location.host&&(WebRoot="http://m.tv.sohu.com");var SetListVersion="20131229",BlankFn=function(){};ENABLE_DEBUG&&URL.getQueryString("wx")&&(IsWeixin=!0);var H5Channeled=IsWeixin?"1200230001":"1211010100",LOC=location,IsUC=!1;(UA.match(/ UC(Browser)?/i)||UA.match(/compatible;Android/i))&&(UA.match(/ LT15i /i)||(IsUC=!0));var IsShouSou=location.host.indexOf("m.sohu.com")>-1,hasClass=function(a,b){return a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))},addClass=function(a,b){-1==(" "+a.className+" ").indexOf(" "+b+" ")&&(a.className=""===a.className?b:a.className+" "+b)},removeClass=function(a,b){var c,d;if(-1!=a.className.indexOf(b)){for(c=a.className.split(" "),d=c.length-1;d>=0;d--)c[d]===b&&c.splice(d,1);a.className=c.join(" ")}},toggleClass=function(a,b){hasClass(a,b)?removeClass(a,b):addClass(a,b)},onDomReady=function(a){var b=window,c=document,d=!1,e=-1,f=10,g=/loaded|complete/,h="DOMContentLoaded",i="onreadystatechange",j="onload",k=function(){d===!1&&(d=!0,a&&a()),b.clearInterval(e)},l=function(){e=b.setInterval(function(){try{c.documentElement.doScroll("left"),k()}catch(a){}},f)},m=function(){e=b.setInterval(function(){g.test(c.readyState)&&k()},f)};return g.test(c.readyState)?(d=!0,!1):(c.addEventListener?(c.addEventListener(h,function(){c.removeEventListener(h,arguments.callee,!1),k()},!1),m()):c.attachEvent?(c.attachEvent(i,function(){g.test(c.readyState)&&(c.detachEvent(i,arguments.callee),k())}),b.attachEvent(j,function(){b.detachEvent(j,arguments.callee),k()}),!c.documentElement.doScroll||null!==b.frameElement&&"undefined"!=typeof b.frameElement||l()):b[j]=function(){k()},!0)},IsHistorySupport="pushState"in history;window.onDomReady=onDomReady;var URL={getQueryData:function(a){a=a.replace(/^\?+/,"").replace(/&amp;/,"&");for(var b,c=a.split("&"),d=c.length,e={};d--;)if(b=c[d].split("="),b[0]){var f=b[1]||"";try{f=decodeURIComponent(f)}catch(g){f=unescape(f)}e[decodeURIComponent(b[0])]=f}return e},getQueryString:function(a,b){var c,d=b?URL.getElSearchString(b):window.location.search.substring(1);return c=URL.getQueryData(d),a in c?c[a]:null},getParam:function(a){var b=new RegExp("(^|&?)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!==c?unescape(c[2]):null},getElSearchString:function(a){var a=$(a).get(0),b=a.search||"";if(!b){var c=a.getAttribute("FORM"==a.nodeName?"action":"href"),d=c.indexOf("?");-1!==d&&(b=c.slice(d))}return b},setQueryString:function(a,b){var c,d,a=$(a),e=a.get(0),f=e.search,g=f||"";if(!f){var h,i=e.nodeName;if("FORM"==i){if("post"!=e.method.toLowerCase()){for(c in b){d=b[c];var j=$('input[name="'+c+'"]',a);j?j.val(d):a.append($('<input type="hidden" name="'+c+'" value="'+d+'" />'))}return}h=a.attr("action")||location.href+""}else h=a.attr("href")||location.href+"";var k=h.indexOf("?"),l=h.indexOf("#");-1==l&&(l=h.length),0>k||k>l?(g="",k=l):g=h.slice(k+1,l)}var m=URL.getQueryData(g),n=[];for(c in b)m[c]=b[c];for(c in m)d=m[c],n.push(c+(d?"="+encodeURIComponent(d):""));if(!(n.length<1)){var o="?"+n.join("&");if(f)e.search=o;else{var p="FORM"==i?"action":"href";a.attr(p,h.slice(0,k)+o+h.slice(l))}}},objToQueryString:function(a){var b,c,d=[];for(b in a){c=a[b];var e=Object.prototype.toString.call(c);d.push("[object Array]"===e?b+"="+JSON.stringify(c):"[object Object]"===e?b+"="+JSON.stringify(c):b+"="+encodeURIComponent("undefined"==typeof c?"":c))}return d.join("&")}};URL.updateGlobalParms=function(a,b){for(var c,d,e=$("a[href],form",a),f=e.length,b=b||URL.URLGlobalParms;f--;)c=e.get(f),d=c.href,d&&d.match(/^(sms|tel|mail)/i)||URL.setQueryString(c,b)},function(a,b,c){URL.init=function(){var a,c=["clientType","clientVer","actionVer","plat","startClient","useVideoLink","r","player"],d=URL.getQueryData(location.search.substring(1)),e={},f=0;IS_EXTERNAL_PLAYER&&c.push("channeled");for(var g=c.length;g--;)a=c[g],d.hasOwnProperty(a)&&(e[a]=d[a],f++);URL.URLGlobalParms=e,f>0&&URL.updateGlobalParms(b,e)},c.fn.getUrlParam=function(a,b){return URL.getQueryString(a,b)}}(window,document,Zepto);var Cookie={isEnabled:!1,set:function(a,b,c,d){var e="";if(0!==c){var f=new Date;f.setTime(f.getTime()+36e5*(c||24)),e=";expires="+f.toGMTString()}var g=escape(a)+"="+escape(b)+e+";path=/"+(d?";domain="+d:"");return document.cookie=g,!0},getByName:function(a){var b=new RegExp("(?:^|;+|\\s+)"+a+"=([^;]*)"),c=document.cookie.match(b);return c?c[1]:""},get:function(a){for(var b,c=document.cookie.split(";"),d=0;d<c.length;d++)if(b=c[d].split("="),b[0].trim()==a)return unescape(b[1]);return""},del:function(a,b,c){var d=new Date;d.setTime(d.getTime()-1),document.cookie=a+"=; expires="+d.toGMTString()+";"+(c?"path="+c+"; ":"path=/; ")+(b?"domain="+b+";":"domain="+window.location.host+";")},remove:function(a){this.set(a,"",-1e3)},test:function(){var a="_c_t_";return this.set(a,"1"),this.isEnabled="1"===this.get(a),this.remove(a),this.isEnabled},serialize:function(a){return JSON.stringify(a)},deserialize:function(a){if("string"!=typeof a)return a;try{return JSON.parse(a)}catch(b){return a||void 0}},setSession:function(a,b){try{window.sessionStorage&&window.sessionStorage.setItem(a,this.serialize(b))}catch(c){console.log("not support session",c),this.set(a,this.serialize(b),24)}},getSession:function(a){var b="";try{window.sessionStorage&&(b=this.deserialize(window.sessionStorage.getItem(a)))}catch(c){console.log("not support session",c),b=this.deserialize(this.get(a))}return b}};if(Cookie.test(),URL&&Cookie){var _mtvsrc=h5Src=URL.getQueryString("src")||URL.getQueryString("SRC")||"";_mtvsrc&&Cookie.set("MTV_SRC",h5Src,7200,".sohu.com"),h5Src=Cookie.get("MTV_SRC")||_mtvsrc}var Refer={};Refer.SrcSettings={1104:/^wx\.m\.tv\.sohu\.com$/i,1106:/^tv\.sohu\.com$|^pad\.tv\.sohu\.com$/i,1107:/^my\.tv\.sohu\.com$/i,1108:/^sports\.sohu\.com$/i,1105:/^(m|wap|s|3g)\.(tv|s)\.sohu\.com$|^(t|t1|t2)\.m\.tv\.sohu\.com$|^sohutv\.hao3608\.com$/i,1109:/^(news|auto|media|www|yule|mil)\.sohu\.com$/i,1001:/^m\.sohu\.com$|^(3g|zhibo|wap)\.sohu\.com$|^(.*)m\.sohu\.com$|^m\.club\.sohu\.com$|^api\.k\.sohu\.com$/i,1110:/^(m|3g|wap|m5|m1|m2)\.baidu\.com$|$(.*)baidu\.mobi$|^webapp\.cbs\.baidu\.com$/i,1111:/^(.*)baidu\.com$/i,1112:/^(.*)hao123\.com$/i,1113:/^v\.m\.liebao\.cn$|^v\.duba\.com$/i,1114:/^(.*)2345\.com$/i,1115:/^v\.sogou\.com$|^m\.kan\.sogou\.com$|^tv\.sogou\.com$/i,1068:/^sogou\.com$|^(.*)\.sogou\.com$/i,1116:/^(.*)sm\.cn$|^(.*)uodoo\.com$/i,1006:/^tv\.uc\.cn$/i,1007:/^hao\.uc\.cn$/i,1117:/^(news|inews)\.uc\.cn$/i,1033:/^m\.video\.so\.com$/i,1075:/^(.*)so\.com$/i,1118:/^(.*)weibo\.com$|^(.*)weibo\.cn$/i,1119:/^(.*)qzone\.qq\.com$/i,1120:/^(.*)10086\.cn$/i,1123:/^(.*)(google|g).(.*)$/i,1121:/^(.*)wapreach\.com$|^(.*)\.app111\.com$|^(.*)homeinns\.cc$|^(hao|hao123|m)\.xiaomi\.com$/i,1122:/^video\.wapreach\.com$|^video\.browser\.miui\.com$|^v\.html5\.qq\.com$|^kanpian\.easou\.com$|^video\.nearme\.com\.cn$/i,1124:/^(.*)soso\.com$|^(.*)easou\.com$|^(.*)bing\.com$/i},Refer.getUrlHost=function(a){var b=a||"",c=/.*:\/\/([^\/]*).*/i,d=b.match(c),e="";return d&&(e=d[1]),e},Refer.getReferHost=function(a){var b=a||document.referrer,c=/.*:\/\/([^\/]*).*/i,d=b.match(c),e="";d&&(e=d[1]);var f=/(\d+).(\d+).(\d+).(\d+)/i.test(e);return(f||!e)&&(e=""),e},Refer.getRefer=function(){var a=document.referrer;return void 0==a&&window.opener&&(a=window.opener.location),void 0==a&&(a=""),a},Refer.matchRefer=function(a,b){var c="";try{a=a.replace(/^http:\/\//,"");var d=b;void 0==d&&(d=Refer.SrcSettings);for(var e in d){var f=d[e];if(f&&a&&f.test(a)){c=e,console.log("matchRefer "+a+" , "+e+" "+f);break}}}catch(g){console.log(g)}return c},Refer.setSrcChanneled=function(){var a={MTV_SRC:"",channeled:""};try{if(Cookie&&URL){var b=h5Src=URL.getQueryString("src")||URL.getQueryString("SRC")||"",c=URL.getQueryString("channeled")||"",d=Refer.getRefer()||"",e=Refer.getReferHost(d)||Refer.getUrlHost(window.location.href)||"";console.log("get referhost "+e+"   "+c),c=c?c||"1212120001":b?"1212130001":e.indexOf("m.sohu.com")>-1?"1200110001":"1212120001",h5Src?b=h5Src:(e&&(b=Refer.matchRefer(e,Refer.SrcSettings),b.length<8&&b>=4&&(b=b=b.substring(0,4)+"0001")),b||(b="11050001")),b&&(a.MTV_SRC=b,Cookie.set("MTV_SRC",b,7200,".sohu.com")),c&&(a.channeled=c,Cookie.set("_channeled",c,7200,".sohu.com")),h5Src=Cookie.get("MTV_SRC")||b,console.log("Refer.js MTV_SRC:"+h5Src+",_channeled:"+c)}}catch(f){console.log(f)}return a},Refer.init=function(){var a=Refer.setSrcChanneled();console.log("Refer matchRefer "+JSON.stringify(a))}(),function(){"use strict";function a(){try{return f in d&&d[f]}catch(a){return!1}}var b,c={},d=window,e=document,f="localStorage",g="script";try{b=d[f]}catch(h){}var i=function(){};if(c.disabled=!1,c.set=i,c.get=i,c.remove=i,c.clear=i,c.transact=function(a,b,d){var e=c.get(a);null===d&&(d=b,b=null),"undefined"==typeof e&&(e=b||{}),d(e),c.set(a,e)},c.getAll=function(){},c.forEach=function(){},c.serialize=function(a){return JSON.stringify(a)},c.deserialize=function(a){if("string"!=typeof a)return void 0;try{return JSON.parse(a)}catch(b){return a||void 0}},a())b=d[f],c.set=function(a,d){return void 0===d?c.remove(a):(b.setItem(a,c.serialize(d)),d)},c.get=function(a){return c.deserialize(b.getItem(a))},c.remove=function(a){b.removeItem(a)},c.clearAll=function(){b.clear()},c.getAll=function(){var a={};return c.forEach(function(b,c){a[b]=c}),a},c.forEach=function(a){for(var d=0;d<b.length;d++){var e=b.key(d);a(e,c.get(e))}};else if(e.documentElement.addBehavior){var j,k;try{k=new ActiveXObject("htmlfile"),k.open();var l="<"+g+">document.w=window</"+g+">";l+='<iframe src="/favicon.ico"></iframe>',k.write(l),k.close(),j=k.w.frames[0].document,b=j.createElement("div")}catch(h){b=e.createElement("div"),j=e.body}var m=function(a){var d=function(){var d=Array.prototype.slice.call(arguments,0);d.unshift(b),j.appendChild(b),b.addBehavior("#default#userData"),b.load(f);var e=a.apply(c,d);return j.removeChild(b),e};return d},n=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),o=function(a){return a.replace(/^d/,"___$&").replace(n,"___")};c.set=m(function(a,b,d){return b=o(b),void 0===d?c.remove(b):(a.setAttribute(b,c.serialize(d)),a.save(f),d)}),c.get=m(function(a,b){return b=o(b),c.deserialize(a.getAttribute(b))}),c.remove=m(function(a,b){b=o(b),a.removeAttribute(b),a.save(f)}),c.clear=m(function(a){var b=a.XMLDocument.documentElement.attributes;a.load(f);for(var c=0,d=b.length;d>c;c++){var e=b[c];a.removeAttribute(e.name)}a.save(f)}),c.getAll=function(){var a={};return c.forEach(function(b,c){a[b]=c}),a},c.forEach=m(function(a,b){for(var d=a.XMLDocument.documentElement.attributes,e=0,f=d.length;f>e;e++){var g=d[e];b(g.name,c.deserialize(a.getAttribute(g.name)))}})}try{var p="__storejs__";c.set(p,p),c.get(p)!==p&&(c.disabled=!0),c.remove(p)}catch(h){c.disabled=!0}c.enabled=!c.disabled,"undefined"!=typeof module&&module.exports&&this.module!==module?module.exports=c:"function"==typeof define&&define.amd&&define(c),c.getStorage=function(){try{b=d[f]}catch(a){console.log("localStorage is not supported")}return b},c.clear=function(a){var b=c.getStorage();if(b)if(a)for(var d in b)0===d.indexOf(a)&&b.removeItem(d);else b.clear()},d.Storage=c}(this);var WIN=window,DOC=document,Util={pingback:function(a,b){if(a)for(var c=a.split("|"),d=0,e=c.length;e>d;d++)(new Image).src=c[d],ENABLE_DEBUG&&void 0!==b&&(ADPingbackCount++,console.log("第"+ADPingbackCount+"个上报,第"+b+"秒:",c[d]))},getOSVersion:function(){var a=0;if(IsIOS){var b=UA.match(/os ([0-9_]+)/i);b&&b[1]&&(a=Util.getVersionNumber(b[1]))}else a=IsAndroid?Util.getAndroidVersionNumber():"4.0.1";return a},getAndroidVersionNumber:function(){var a=UA.match(/android(.*?);/i)||[];return a[1]||0},getVersionNumber:function(a){var b=a.replace(/_/g,".").replace(/^([0-9]+\.[0-9]+)[0-9\.]*/,"$1");return parseFloat(b||0)},timeFromNow:function(a){var b=60,c=60*b,d=24*c,e=30*d,f=12*e;return a=(+new Date-parseInt(a))/1e3,a>=f?Math.floor(a/f)+"年前":a>=e?Math.floor(a/e)+"个月前":a>=d?Math.floor(a/d)+"天前":a>=c?Math.floor(a/c)+"小时前":a>=b?Math.floor(a/b)+"分钟前":"刚刚"},getTotalMonth:function(a){var b=new Date(a);return 12*b.getFullYear()+b.getMonth()},secondsToTime:function(a){var b=parseInt(a);isNaN(b)&&(b=0);var c=Math.floor(b/60),a=b%60;if(10>a&&(a="0"+a),60>c)return 10>c&&(c="0"+c),c+":"+a;var d=Math.floor(c/60);return c%=60,10>c&&(c="0"+c),10>d&&(d="0"+d),d+":"+c+":"+a},secondsToTimeText:function(a){var b=parseInt(a);isNaN(b)&&(b=0);var c=Math.floor(b/60),a=b%60+"秒";if(60>c)return(c>0?c+"分":"")+a;var d=Math.floor(c/60);return c%=60,(d>0?d+"小时":"")+c+"分"+a},shortCount:function(a){return a=parseInt(a),a>1e8?a=Math.floor(a/1e8)+"亿":a>1e4&&(a=Math.floor(a/1e4)+"万"),a},shortFixedCount:function(a){return a=parseFloat(a),a&&a>1e8?a=(a/1e8).toFixed(1)+"亿":a&&a>1e4&&(a=(a/1e4).toFixed(1)+"万"),a},dateString:function(a){var b;return(b=a.match(/([0-9]{4}\-[0-9]+\-[0-9]+)/))&&(a=b[1]),a},setLoad:function(a){var a=$(a);return a.hasClass("_load_inited")||a.addClass("_load_inited").append($('<i class="ui_loading"><u></u><u></u><u></u></i>')),a},loadScript:function(a,b,c){var d=DOC.getElementsByTagName("head")[0]||DOC.body,e=DOC.createElement("script"),f=!1;e.src=a,e.onload=e.onreadystatechange=function(){f||this.readyState&&"loading"===this.readyState||(f=!0,b&&b.apply(null,c||[]),e.onload=e.onreadystatechange=null,d.removeChild(e))},d.appendChild(e)},formatURL:function(a){return(a+"").replace(/^https?:\/\/(my\.|v\.)?tv\./i,"http://m.tv.").replace("http://s.","http://m.s.").replace("http://m.s.","http://m.tv.").replace(/^http:\/\/(video\.)?2012/i,"http://m.s")},getPageOffset:function(){return WIN.pageYOffset||DOC.body&&DOC.body.scrollTop||0},getSohuDefaultApplink:function(a){if(a&&"string"==typeof a)return a;var b="http://m.tv.sohu.com/app";return IsAndroid&&(b=IsAndroidPad?"http://upgrade.m.tv.sohu.com/channels/hdv/3.5/SohuTV_3.5.0_680_201406191825.apk":"http://upgrade.m.tv.sohu.com/channels/hdv/4.3.2/sohuvideo_v4.3.2_680.apk"),IsIPhone&&(b="https://itunes.apple.com/cn/app/sou-hu-shi-pin-gao-qing/id458587755?mt=8"),IsIPad&&(b="https://itunes.apple.com/cn/app/sou-hu-shi-pin-hd/id414430589?mt=8"),IsWindowsPhone&&(b="http://www.windowsphone.com/zh-CN/apps/403faf93-d22c-4331-ac32-9560ee9fac94"),IsWindowsPad&&(b="http://apps.microsoft.com/windows/zh-CN/app/c5ae3c2a-5573-45c2-ac63-7d67e01de6bb"),IsWeixin&&(b="http://a.app.qq.com/o/simple.jsp?pkgname=com.sohu.sohuvideo&g_f=991881"),b},ajaxAppLinkBySrcPlt:function(a,b){var c=b||Cookie.get("MTV_SRC")||"0",d=Util.getSohuDefaultApplink();c=c.substr(0,4);var e="http://m.tv.sohu.com/h5/cooperation/"+c+".json?pos=1&platform="+Util.getUserPt()+"&callback=?";return console.log("ajax url: "+e),$.ajax({url:e,type:"get",dataType:"JSONP",success:function(b){d=b&&b.records.length>0?b.records[0].link:Util.getSohuDefaultApplink(d),a&&a(d)},error:function(){d=Util.getSohuDefaultApplink(d),a&&a(d)}}),d},getDownloadAppLink:function(a,b){var c=Cookie.get("MTV_SRC")||"0",c=c.substr(0,4);console.log("src="+c+" ,plt="+Util.getUserPt());var d=Util.getSohuDefaultApplink(),e=!1;d=Util.ajaxAppLinkBySrcPlt(function(b){"function"==typeof a&&(e=!0,a(b));var c=$("#new_ad_appdownload")[0];c&&(c.href=b)});var f=!1;if(c&&(c.indexOf("1073")>-1||1073===c)&&(f=!0),IsAndroid&&f){var g=WIN.VideoData||WIN.videoData||{};if(g&&g.vid){var h=player&&player.videoData.urls.downloadUrl;h>0&&(h=h[0]||""),d="xgm://m.tv.sohu.com/download/video?vid="+g.vid+"&aid="+g.sid+"&video_order="+g.videoOrder+"&video_name="+(g.video_name||g.tvname)+"&url_down="+h+"&hor_high_pic="+g.horHighPic+"&isSohuFormat=0"}}return e||"function"!=typeof a||a(d),"function"==typeof b&&b(d),d},getDownloadAppLinkIndex:function(a){var b="http://m.tv.sohu.com/app",c=WIN.VideoData||WIN.videoData||{};return URLParms.clientType&&"1"===URLParms.startClient&&1===URL.getQueryString("isappinstalled")?c&&c.vid&&(b="sohuvideo://",b+="action.cmd?action=1.1&vid="+c.vid+"&cid="+c.cid+"&sid="+c.sid+"&cateCode="+c.cateCode):(b=Util.getSohuDefaultApplink(a),IsAndroid&&(tmpapklink=Util.ajaxAppLinkBySrcPlt(null,0),tmpapklink&&(b=tmpapklink))),IS_EXTERNAL_PLAYER&&DOC.referrer.match(/m\.sohu\.com/i),b},appLink:function(){{var a=$(this);a.attr("channel")}ClickTrace.pingback(a);var b=function(b){setTimeout(function(){location.href=a.attr("href")||b},50)};return Util.getDownloadAppLink(b),!1},appLinkForDiors:function(){function a(a){setTimeout(function(){location.href=a},50)}var b=($(this),h5Src),c="";switch(String(b)){case"433":c="http://upgrade.m.tv.sohu.com/channels/hdv/all/SohuTV_4.0.2_433_201403101517.apk";break;case"435":case"1001|1100":c="http://upgrade.m.tv.sohu.com/channels/hdv/all/SohuTV_4.0.2_435_201403101517.apk";break;case"1028|1100":c="http://upgrade.m.tv.sohu.com/channels/hdv/all/SohuTV_4.0.2_436_201403101517.apk";break;default:c="http://upgrade.m.tv.sohu.com/channels/hdv/all/SohuTV_4.0.2_983_201403101517.apk"}return Util.getDownloadAppLink(c,a),!1},getConnectionType:function(){var a,b=window.navigator.connection,c="";return b&&(a=b.type,a==b.CELL_2G?c="2g":a==b.CELL_3G?c="3g":a==b.WIFI&&(c="wifi")),c},_isMeizu:!1,isMeizu:function(){var a=!1;if(IsAndroid)if(IsUC||IsQQBrowser||!UA.match(/(M9|M032) Build/i)){if(UA.match(/Mac OS X/i)&&!IsUC){var b=WIN.screen.width,c=WIN.screen.height;(640==b||960==b||320==b&&410==c||410==b&&320==c)&&(a=!0)}}else a=!0;return Util._isMeizu=a,Util.isMeizu=function(){return Util._isMeizu},a},fixVideoMask:function(){IsAndroid&&(IsUC||IsQQBrowser)&&(SohuMobilePlayer.pause(),Util.shaveWindow())},shaveWindow:function(){return WIN.scrollTo(0,Util.getPageOffset()+1)},formatDateWithBar:function(a){var a=a||new Date,b=a.getMonth()+1,c=a.getDate();return b.toString().length<2&&(b="0"+b),c.toString().length<2&&(c="0"+c),a.getFullYear()+"-"+b+"-"+c},formatDateWithZh:function(a){var a=a||new Date,b=a.getMonth()+1,c=a.getDate();return b.toString().length<2&&(b="0"+b),c.toString().length<2&&(c="0"+c),a.getFullYear()+"年"+b+"月"+c+"日"},formatDateStr:function(a,b){var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1===RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b},getDownloadURL:function(a){a=a||"";var b=a.indexOf(".mp4");return b>-1&&(URL.getQueryString("src")||Cookie.get("src"))&&(a=a.replace("plat=17","plat=3")),a},getUserPt:function(){var a=1;return IsIPad&&(a=2),IsIPhone&&(a=3),IsAndroid&&(a=5,/tv/i.test(UA)&&(a=6)),IsAndroidPad&&(a=4),IsWindowsPad&&(a=7),IsWindowsPhone&&(a=8),IsSymbian&&(a=9),a},escape:function(a){return String(a).replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},reverse:function(a){return Array.isArray(a)?a.reverse():String(a).split("").reverse().join("")},tojson:function(a){return JSON.stringify(a)},getBrowserInfo:function(){var a=window.navigator.userAgent.toLowerCase();console.log(a);var b={},c="webkit",d="0.0",e=Util.getUserPt(),f=["webkit","webkit","0.0"];try{f=/(opr)[\/]([\w.]+)/.exec(a)||/(UCBrowser)[ \/]([\w.]+)/.exec(a)||/(QQBrowser)[ \/]([\w.]+)/.exec(a)||/(MicroMessenger)[ \/]([\w.]+)/.exec(a)||/(BaiduBrowser)[ \/]([\w.]+)/.exec(a)||/(MiuiBrowser)[ \/]([\w.]+)/.exec(a)||/(sogou)[ \/]([\w.]+)/.exec(a)||/(chrome)[ \/]([\w.]+)/.exec(a)||/(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||["webkit","webkit","0.0"],c=f[3]||f[1]||"webkit",d=f[2]||"0.0"}catch(g){console.log(g)}try{d=d||"0",d=d.replace(/_|\-/g,"."),d=d.substr(0,d.indexOf(".")+2)}catch(g){d="0.0",console.log(g)}try{b.ver=d,b.name=c,b.plat=e}catch(g){}return b}},EncodeUtil={utf8to16:function(a){var b,c,d,e,f,g,h,i,j;for(b=[],e=a.length,c=d=0;e>c;){switch(f=a.charCodeAt(c++),f>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:b[d++]=a.charAt(c-1);break;case 12:case 13:g=a.charCodeAt(c++),b[d++]=String.fromCharCode((31&f)<<6|63&g);break;case 14:g=a.charCodeAt(c++),h=a.charCodeAt(c++),b[d++]=String.fromCharCode((15&f)<<12|(63&g)<<6|63&h);break;case 15:switch(15&f){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:g=a.charCodeAt(c++),h=a.charCodeAt(c++),i=a.charCodeAt(c++),j=(7&f)<<18|(63&g)<<12|(63&h)<<6|(63&i)-65536,b[d]=j>=0&&1048575>=j?String.fromCharCode(j>>>10&1023|55296,1023&j|56320):"?";break;case 8:case 9:case 10:case 11:c+=4,b[d]="?";break;case 12:case 13:c+=5,b[d]="?"}}d++}return b.join("")},b64_decodex:function(a){var b,c,d=[],e="";for(b=0,c=a.length;c>b;b+=4)e+=EncodeUtil.b64_423(a.substr(b,4));for(b=0,c=e.length;c>b;b+=8)d+=EncodeUtil.b2i(e.substr(b,8));return d},b64_423:function(a){for(var b=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","-","_"),c=0,d=a.length,e="";d>c;c++){for(var f=0;64>f;f++)if(a.charAt(c)==b[f]){var g=f.toString(2);e+=("000000"+g).substr(g.length);break}if(64==f)return 2==c?e.substr(0,8):e.substr(0,16)}return e},b2i:function(a){for(var b=0,c=128,d=0;8>d;d++,c/=2)"1"==a.charAt(d)&&(b+=c);return String.fromCharCode(b)}},Passport=function(){var a,b={},c=function(){var a,b,c,d=["ppinf","ppinfo","passport"];for(a=0,b=d.length;b>a;a++)if(c=new RegExp("\\b"+d[a]+"\\b=(.*?)(?:$|;)").exec(document.cookie),c&&c.length){c=c[1];break}return c},d=function(a){var b="";try{a=unescape(a).split("|"),("1"==a[0]||"2"==a[0])&&(b=EncodeUtil.utf8to16(EncodeUtil.b64_decodex(a[3])))}catch(c){}return b},e=function(a){var b,c,d,e={};for(a=(a||"").split("|"),b=0,c=a.length;c>b;b++)d=a[b].split(":"),d.length>1&&(e[d[0]]=d[2]);return e},f=function(){var f=c(),g=b;return a!=f&&(a=f,g=e(d(f)),b=g),g};return{getPassport:function(){return f().userid||""},getUid:function(){return f().uid||""},getUUID:function(){return f().uuid||""},getQname:function(){return f().uniqname||""}}}();!function(){"use strict";var a=window.svp||{};a.TYPE_CODE_MSG={COPYRIGHT:{100:"您所在的国家或地区，不在所播放的节目版权范围"},SUPPORT:{100:"您的浏览器不支持播放功能，请使用",101:"该视频目前只支持5分钟观看，观看完整视频，请使用",102:"UC浏览器不支持播放功能，建议使用系统浏览器或请使用",103:"直播请使用搜狐视频客户端"},REQUEST:{100:"网络超时，请刷新重试"}},a.PLAY_MODE={nor:"流畅",hig:"高清",sup:"超清"},a.DEFAULT_CONFIG={width:"100%",height:"100%",pWidth:"",pHeight:"",volume:1,elemId:"videoTagId",dataType:"",alwaysShowControls:!1,autoplay:!0,defControls:!1,loop:!1,preload:!1,mediaType:"vod",modeType:"nor",html5SkinCss:"http://m.tv.sohu.com/mb/dist/css/play.css",posterType:"horizon",timeLimit:-1,isPauseAd:!1,pauseAdImg:"",mediaAdPlatform:"none",isCopyrightCheck:!0,androidPhoneDownloadUrl:"http://upgrade.m.tv.sohu.com/channels/hdv/4.2/SohuTV_4.2_680_201406030956.apk",androidPadDownloadUrl:"http://upgrade.m.tv.sohu.com/channels/hdv/3.5/SohuTV_3.5.0_680_201406191825.apk",iosDownloadUrl:"http://itunes.apple.com/cn/app/sou-hu-shi-pin-gao-qing/id458587755?mt=8",winPhoneDownLoadUrl:"http://www.windowsphone.com/zh-CN/apps/403faf93-d22c-4331-ac32-9560ee9fac94",pcDownLoadUrl:"http://m.tv.sohu.com/app/",adClose:"0",appid:"tv",debug:!1,channeled:"default",fullscreenType:0,isRemHistory:!1},a.$=Zepto||jQuery,window.svp=a
}(),function(a){"use strict";var b=function(b){var c=b.match(/MQQBrowser\/(\d+\.\d+)/i),d=b.match(/QQ\/(\d+\.(\d+)\.(\d+)\.(\d+))/i),e=b.match(/MicroMessenger\/((\d+)\.(\d+))\.(\d+)/)||b.match(/MicroMessenger\/((\d+)\.(\d+))/),f=b.match(/Mac\sOS\sX\s(\d+\.\d+)/),g=b.match(/Windows(\s+\w+)?\s+?(\d+\.\d+)/),h=b.match(/MiuiBrowser\/(\d+\.\d+)/i),i=b.match(/UCBrowser\/(\d+\.\d+(\.\d+\.\d+)?)/)||b.match(/\sUC\s/),j=b.match(/IEMobile(\/|\s+)(\d+\.\d+)/),k=b.match(/(ipod\sOS)\s([\d_]+)/);if(a.browser=a.browser||{},a.os=a.os||{},window.ActiveXObject){var l=6;(window.XMLHttpRequest||b.indexOf("MSIE 7.0")>-1)&&(l=7),(window.XDomainRequest||b.indexOf("Trident/4.0")>-1)&&(l=8),b.indexOf("Trident/5.0")>-1&&(l=9),b.indexOf("Trident/6.0")>-1&&(l=10),a.browser.ie=!0,a.browser.version=l}else b.indexOf("Trident/7.0")>-1&&(a.browser.ie=!0,a.browser.version=11);k&&(this.os.ios=this.os.ipod=!0,this.os.version=k[2].replace(/_/g,".")),g&&(this.os.windows=!0,this.os.version=g[2]),f&&(this.os.Mac=!0,this.os.version=f[1]),b.indexOf("lepad_hls")>0&&(this.os.LePad=!0),c&&(this.browser.MQQ=!0,this.browser.version=c[1]),d&&(this.browser.MQQClient=!0,this.browser.version=d[1]),e&&(this.browser.WeChat=!0,this.browser.version=e[1]),h&&(this.browser.MIUI=!0,this.browser.version=h[1]),i&&(this.browser.UC=!0,this.browser.version=i[1]||0/0),!c||window.mtt&&window.mtt.getBrowserParam||!a.os.android||(this.browser.UC=!0,this.browser.version="9.6.0",this.browser.MQQ=!1),j&&(this.browser.IEMobile=!0,this.browser.version=j[2]),this.os.windows&&(this.os.win64="undefined"!=typeof navigator.platform&&"win64"===navigator.platform.toLowerCase()?!0:!1);var m={iPad7:"iPad; CPU OS 7",LePad:"lepad_hls",XiaoMi:"MI-ONE",SonyDTV:"SonyDTV",SamSung:"SAMSUNG",HTC:"HTC",VIVO:"vivo"};for(var n in m)this.os[n]=-1!==b.indexOf(m[n]);this.os.getNumVersion=function(){return parseFloat(a.os.version,"10")},this.os.hasTouch="ontouchstart"in window,this.os.hasTouch&&this.os.ios&&this.os.getNumVersion()<6&&(this.os.hasTouch=!1),a.browser.WeChat&&a.browser.version<5&&(this.os.hasTouch=!1),a.extend(a.browser,{getNumVersion:function(){return parseFloat(a.browser.version,"10")},isFFCanOcx:function(){return a.browser.firefox&&a.browser.getNumVersion()>=3?!0:!1},isCanOcx:function(){return!(!a.os.windows||!a.browser.ie&&!a.browser.isFFCanOcx()&&!a.browser.webkit)},isNotIESupport:function(){return!!a.os.windows&&(!!a.browser.webkit||a.browser.isFFCanOcx())}}),a.os.isIos=a.os.ios,a.os.android=!(!a.os.android&&!/Android|HTC|Adr/i.test(b)),a.os.isAndroid=a.os.android,a.os.isIphone=!a.os.isAndroid&&/iPod|iPhone/i.test(b),a.os.isVivoPhone=/vivo/i.test(b),a.os.isWindowsPhone=/Windows Phone/i.test(b),a.os.isSonyPhone=/Sony/i.test(b),a.os.isWindowsPad=/Windows Pad/i.test(b),a.os.isIpad=!a.os.isAndroid&&/iPad.*Mac OS/i.test(b),a.os.isAndroidPad=!!IsAndroidPad||!1,a.os.isSupportPlayVideoInline=a.os.isIpad||!a.os.isIphone,a.os.isBlackBerry=/BB10|BlackBerry/i.test(b),a.os.isIEMobile=/IEMobile/i.test(b),a.os.isSymbian=/Symbian/i.test(b),a.os.isIE=a.browser.ie&&!!document.all,a.os.isCoolPad=/Coolpad/i.test(b),a.os.isBaiduBrowser=/BaiduBrowser|T5\/.*baiduboxapp/i.test(b),a.os.isUCBrowser=/UCBrowser/i.test(b),a.os.isQQBrowser=/QQBrowser/i.test(b),a.os.isOldQQBrowser=/MQQBrowser\/([1234]\.\d*||5\.[12345]\d*)\sMobile/i.test(b),a.os.isNewQQBrowser=a.os.isQQBrowser&&!a.os.isOldQQBrowser,a.os.isWeixin=!(!window.WeixinJSBridge&&!/MicroMessenger/i.test(b)),a.os.isPCIEBrowser=/MSIE/i.test(b),a.os.isFirefoxBrowser=/Firefox/i.test(b),a.os.isMIOne=/MI-ONE/i.test(b),a.os.isHuaWei=/HUAWEI/i.test(b),a.os.isSAMSUNG=/SAMSUNG/i.test(b),a.os.isOldWindowsPhone=/Windows\sPhone\s([1234567]\.|8\.0)/i.test(b),a.os.isNewWindowsPhone=a.os.isWindowsPhone&&!a.os.isOldWindowsPhone?!0:!1,a.userAgent={},a.extend(a.userAgent,a.os),a.extend(a.userAgent,a.browser),a.userAgent.browserVersion=a.browser.version,a.userAgent.osVersion=a.os.version,a.userAgent.desc=b,a.ua=a.userAgent};b.call(a,navigator.userAgent)}($),"undefined"==typeof svp&&(svp={},svp.$=window.$||{}),function($){$.fn.oriShow=function(){return this.css({display:"block"}),this},$.fn.oriHide=function(){return this.css({display:"none"}),this};var extFun={htmlLog:function(a,b){0===$("#js_htmlLog").length&&$("body").append($('<div id="js_htmlLog" style="height: 200px;overflow: scroll;"></div>'));var c=[];$.isUndefined(a)||c.push("<span>"+a+"</span>"),$.isUndefined(b)||c.push("<span>"+b+"</span>"),$("#js_htmlLog").prepend(c.join(" ")+"<br>")},noop:function(){},blankFun:function(){},isString:function(a){return"string"===$.type(a)},isUndefined:function(a){return"undefined"===$.type(a)},isNumber:function(a){return"number"===$.type(a)},isEmpty:function(a){if(null==a)return!0;if(a.length>0)return!1;if(0===a.length)return!0;for(var b in a)if(hasOwnProperty.call(a,b)||null!==a[b])return!1;return!0},isArray:function(a){return!$.isUndefined(a)&&a instanceof Array},merge:function(a,b){for(var c in a)$.isUndefined(b[c])||(a[c]=b[c]);return a},now:function(){return(new Date).getTime()},getISOTimeFormat:function(){var a=new Date,b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate(),e=a.getHours(),f=a.getMinutes(),g=a.getSeconds();return[[b,10>c?"0"+c:c,10>d?"0"+d:d].join("-"),[10>e?"0"+e:e,10>f?"0"+f:f,10>g?"0"+g:g].join(":")].join(" ")},formatSeconds:function(a){a=parseInt(a);var b=parseInt(a/60),c=b>=60?parseInt(b/60):0,d=a%60,e="";return b>=60&&(b%=60),c>0&&(e+=10>c?"0"+c:c,e+=":"),e+=10>b?"0"+b:b,e+=":",e+=10>d?"0"+d:d},getHost:function(){var a=window.location.hostname||window.location.host,b=location.host.split(".");return b.length>1&&(a=b.slice(b.length-2).join(".")),a},getUrlParam:function(a,b){b=b||document.location.toString();var c=new RegExp("(^|&|\\\\?)"+a+"=([^&]*)(&|$|#)"),d=null;return(d=b.match(c))?d[2]:""},filterXSS:function(a){return $.isString(a)?(a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=a.replace(/\"/g,"&quot;"),a=a.replace(/\'/g,"&apos;")):a},createGUID:function(a){a=a||32;for(var b="",c=1;a>=c;c++){var d=Math.floor(16*Math.random()).toString(16);b+=d}return b},formatSize:function(a){var b=""+a;return b.indexOf("%")>0?b:b.indexOf("px")>0?b:/^\d+$/.test(b)?b+"px":b},isTrue:function(v){return eval(svp.$.filterXSS(v))}};$.extend($,extFun),svp.Deferred=$.extend(!0,{},$).Deferred}(svp.$),function(){function a(a){return a instanceof Array}var b,c,d,e,f,g,h,i,j,k,l,m,n,o=[].slice;f="1.3.2",c="pending",e="resolved",d="rejected",j=function(a,b){return null!=a?a.hasOwnProperty(b):void 0},l=function(a){return j(a,"length")&&j(a,"callee")},i=function(b){return l(b)?i(Array.prototype.slice.call(b)):a(b)?b.reduce(function(b,c){return a(c)?b.concat(i(c)):(b.push(c),b)},[]):[b]},g=function(a,b){return 0>=a?b():function(){return--a<1?b.apply(this,arguments):void 0}},m=function(a,b){return function(){var c;return c=[a].concat(Array.prototype.slice.call(arguments,0)),b.apply(this,c)}},h=function(a,b,c){var d,e,f,g,h;for(g=i(a),h=[],e=0,f=g.length;f>e;e++)d=g[e],h.push(d.call.apply(d,[c].concat(Array.prototype.slice.call(b))));return h},b=function(){var a,f,g,j,k,l;return l=c,j=[],k=[],a=[],g={},this.promise=function(f){var m,n;return f=f||{},f.state=function(){return l},n=function(a,b){return function(){return l===c&&b.push.apply(b,i(arguments)),a()&&h(arguments,g),f}},f.done=n(function(){return l===e},j),f.fail=n(function(){return l===d},k),f.always=n(function(){return l!==c},a),m=function(a,c){var d,e;return d=new b,e=function(a,b,c){return a(c?function(){return b(c.apply(null,i(arguments)))}:function(){return b.apply(null,i(arguments))})},e(f.done,d.resolve,a),e(f.fail,d.reject,c),d},f.pipe=m,f.then=m,f},this.promise(this),f=function(b,d,e){return function(){return l===c&&(l=b,g=arguments,h([d,a],g,e)),this}},this.resolve=f(e,j),this.reject=f(d,k),this.resolveWith=function(){var a,b;return b=arguments[0],a=2<=arguments.length?o.call(arguments,1):[],f(e,j,b).apply(null,a)},this.rejectWith=function(){var a,b;return b=arguments[0],a=2<=arguments.length?o.call(arguments,1):[],f(d,k,b).apply(null,a)},this},n=function(){var a,c,d,e,f,h,j,k;for(e=new b,c=i(arguments),d=g(c.length,e.resolve),f=0,j=c.length;j>f;f++)a=c[f],a.done(d);for(h=0,k=c.length;k>h;h++)a=c[h],a.fail(function(){return e.reject()});return e.promise()},k=function(a){return a.Deferred=function(){return new b},a.ajax=m(a.ajax,function(a,c){var d,e;return null==c&&(c={}),e=new b,d=function(a,b){return m(a,function(){var a,c;return c=arguments[0],a=2<=arguments.length?o.call(arguments,1):[],c&&c.apply(null,a),b.apply(null,a)})},c.success=d(c.success,e.resolve),c.error=d(c.error,e.reject),a(c),e.promise()}),a.ajaxTolerate=m(a.ajax,function(a,c){var d,e,f=0,g=!1;return null==c&&(c={}),e=new b,d=function(b,d,e){return m(b,function(){var b,h;if(!g)return h=arguments[0],b=2<=arguments.length?o.call(arguments,1):[],e?1>f?(f++,a(c),null):2==f?(f++,g=!0,h&&h.apply(null,b),d.apply(null,b)):(f++,null):(g=!0,h&&h.apply(null,b),d.apply(null,b))})},c.success=d(c.success,e.resolve),c.error=d(c.error,e.reject,!0),a(c),setTimeout(function(){g||a(c)},1e3),e.promise()}),a.when=n},"undefined"!=typeof exports?(exports.Deferred=function(){return new b},exports.when=n,exports.installInto=k):(this.Deferred=function(){return new b},this.Deferred.when=n,this.Deferred.installInto=k,this.DeferedClass=b)}.call(svp),svp.Deferred.installInto(Zepto),function(a){for(var b=0,c=a.length;c>b;b++)if("function"==typeof window[a[b]]){svp.$=window[a[b]];break}}(["Zepto"]),function(){"undefined"==typeof document.DOCUMENT_NODE&&(document.DOCUMENT_NODE=9)}(),function(a){if("undefined"==typeof a.getAsyncScript&&(a.getAsyncScript=function(a,b){var c=document.getElementsByTagName("head")[0]||document.body,d=document.createElement("script");d.async="true",d.src=a,b&&(d.onload=b),c.appendChild(d)}),"undefined"==typeof a.getScript&&(a.getScript=function(a,b,c){var d=document.getElementsByTagName("head")[0]||document.body,e=document.createElement("script"),f=!1;e.type="text/javascript",e.src=a,e.onload=e.onreadystatechange=function(){f||this.readyState&&"loading"===this.readyState||(f=!0,b&&b.apply(null,c||[]),e.onload=e.onreadystatechange=null,d.removeChild(e))},d.appendChild(e)}),"undefined"==typeof a.getCSS&&(a.getCSS=function(a){var b=document.getElementsByTagName("head")[0]||document.body,c=document.createElement("link");c.href=a,c.rel="stylesheet",c.type="text/css",b.appendChild(c)}),"undefined"==typeof a.getFnName&&(a.getFnName=function(a){var b="";return"function"==typeof a&&(b=a.name||(/function ([^\(]+)/.exec(a.toString())||[])[1]||""),b}),"undefined"==typeof a.getFnArgName){var b=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;a.getFnArgName=function(a){if("function"==typeof a){var c=a.toString().replace(b,""),d=c.slice(c.indexOf("(")+1,c.indexOf(")")).match(/([^\s,]+)/g);return null===d?[]:d}return[]}}}(svp.$);var Trace=function(){var a=1,b=parseFloat(window.devicePixelRatio)||1;$.os.android&&(window.screen.width/window.innerWidth).toFixed(2)==b.toFixed(2)&&(a=1/b);var c=window.screen,d=Math.floor(c.width*a)+"x"+Math.floor(c.height*a),e=Passport.getPassport(),f="",g="";return IsIOS?(g="ios",IsIPad?f="ipad":IsIPhone&&(f="iphone")):IsAndroid?f=g="android":IsWindowsPhone&&(f=g="windowsphone"),{getUid:function(){return Cookie.get("SUV")||""},getClientUid:function(){return Trace.getQueryString("uid")||""},getScreenSize:function(){return d},getPassport:function(){return e},getOS:function(){return g},getPlatform:function(){return f},getVideoData:function(a){var b=window.VideoData||window.videoData||{};return b[a]||""},getQueryString:function(a){var b=new RegExp("(^|&?)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!==c?unescape(c[2]):""},getChannelSrc:function(){var a=Trace.getQueryString("src")||Trace.getQueryString("SRC")||Cookie.get("MTV_SRC")||"0",b=/(\d+).(\d+).(\d+).(\d+)/i.test(window.document.domain);return"0"!=a||!b&&""!=window.document.domain||(a="11050001"),a},getChanneled:function(){var a=window.VideoData||window.videoData||{},b=Trace.getQueryString("src")||Trace.getQueryString("SRC")||"",c="1212120001";b&&(c="1212130001");var d=Cookie.get("_channeled")||c,e=location.href||"http://m.tv.sohu.com/";try{d=e.indexOf("hots")>-1||"undefined"!=typeof videoDataFirst&&videoDataFirst?a.channeled||Trace.getQueryString("channeled")||d:Trace.getQueryString("channeled")||a.channeled||d,IsWeixin&&(d="1211110001"),"sogou"==URL.getQueryString("from")&&(d="1200150001")}catch(f){console.log(f)}return d},getConnectionType:function(){return Util.getConnectionType()||""}}}();IS_EXTERNAL_PLAYER=location.href.match(/player=1/i)||location.host.indexOf("m.sohu.com")>-1?!0:!1;var cookieSUV=Cookie.get("SUV"),cookieIPLOC=Cookie.get("IPLOC");if(!cookieSUV||!cookieIPLOC){var _suv=1e3*+new Date+Math.round(1e3*Math.random());cookieSUV||Cookie.set("SUV",_suv,5e4,".sohu.com"),cookieIPLOC||IS_EXTERNAL_PLAYER||Util.loadScript("http://pv.sohu.com/suv/"+_suv)}window.sohuPV={pv:function(a){var b={};a=a||{};var c=window.VideoData||window.videoData||{},d=a.channeled||Trace.getChanneled(),e=(c.vid||"",location.href||"http://m.tv.sohu.com/"),f=c.plid||c.aid||c.sid||"";try{b={url:encodeURIComponent(e),refer:encodeURIComponent(document.referrer||"http://m.tv.sohu.com/"),uid:Trace.getUid(),webtype:Trace.getConnectionType(),screen:Trace.getScreenSize(),catecode:Trace.getVideoData("cateCode")||Trace.getVideoData("cate_code")||"",pid:f,vid:Trace.getVideoData("vid")||"",os:Trace.getOS(),platform:Trace.getPlatform(),passport:Trace.getPassport(),t:+new Date,channeled:d,MTV_SRC:encodeURIComponent(Trace.getChannelSrc())}}catch(g){console.log("trace pv exception ",g)}ENABLE_DEBUG&&console.log("trace pv ",b),Util.pingback("http://z.m.tv.sohu.com/pv.gif?"+$.param(b))}};var TracePV=window.sohuPV;if(!IS_EXTERNAL_PLAYER){window._iwt_UA="UA-sohu-123456",$(document).ready(function(){window.autoTrace&&window.sohuPV.pv()}),Util.loadScript("http://tv.sohu.com/upload/Trace/iwt-min.js");var comsoreUrl=("https:"==document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/beacon.js";Util.loadScript(comsoreUrl,function(){"undefined"!=typeof window.COMSCORE&&window.COMSCORE.beacon({c1:"2",c2:"7395122",c3:"",c4:"",c5:"",c6:"",c15:""})}),"m.s.sohu.com"===location.host?$().ready(function(){Util.loadScript("http://js.sohu.com/wrating20120726.js",function(){var a;try{a=window._getAcc()}catch(b){}a&&Util.loadScript("http://sohu.wrating.com/a1.js",function(){window.vjAcc=a,window.wrUrl="http://sohu.wrating.com/";try{if(!0===window.vjValidateTrack()){var b=window.wrUrl+"a.gif"+window.vjGetTrackImgUrl();$(document.body).append('<div style="display:none"><img src="'+b+'" id="wrTagImage" /></div>'),window.vjSurveyCheck()}}catch(c){}})})}):Util.loadScript("http://tv.sohu.com/upload/Trace/wrating.js")}var RateTest={mode:"man",apiURL:"",hotURL:"",disURLQueue:[],videoTsCount:0,urlTimeoutTimers:{},urlTimeoutURLs:{},id:0,videoData:window.VideoData||window.videoData||{},init:function(){"undefined"!=typeof player&&player.videoData&&(this.videoData=player.videoData),null!==URL.getQueryString("r")&&this.videoData&&($(".main_container").prepend('<div class="rate_test"><span class="button">速度测试</span><span class="tip">UID: '+(Cookie.get("SUV")||"-")+"</span><div></div></div>"),$(".rate_test .button").on("click",function(){var a=$(this),b="disabled";a.hasClass(b)||(a.addClass(b),RateTest.startTest("man"))}))},startTest:function(a){RateTest.mode=a,$(".rate_test div").html(""),this.videoData=window.VideoData?window.VideoData:player&&player.videoData?player.videoData:{},window.callback_test=function(){},RateTest.addTitle("OpenAPI"),RateTest.apiURL="http://api.tv.sohu.com/video/playinfo/"+this.videoData.vid+".json?api_key=9854b2afa779e1a6bff1962447a09dbd&plat=6&sver=2.8&partner=999&c=1&sid=0&&callback=callback_test",RateTest.addURLItem(RateTest.apiURL);var b,c,d=RateTest.id++,e=new Date,f=0;try{var g=this.videoData.urls.m3u8;b=g.hig||g.nor||g.sup||[]}catch(h){b=[]}for(var i=b.length;i>f;f++)if(b[f]){c=b[f];break}c&&(RateTest.hotURL=c,RateTest.addTitle("Hot VRS"),$(".rate_test div").append(RateTest.getItemHTML(d,c)),c.match(/\.m3u8/i)&&(c=c.replace(/http:\/\/[^\/]+/i,"/hot_vrs")),$.ajax({url:c,type:"get",dataType:"text",success:function(a){if(a){var b,c,f=a.match(/(http:\/\/[^\s]+)/gi)||[],g=0,h=f.length;if(RateTest.videoTsCount=h,h>0){RateTest.URLLoaded(d,e,RateTest.hotURL),RateTest.addTitle("m3u8 ("+h+")","rate_test_video");for(var g=0,h=f.length;h>g;g++)c="m3u8callback_"+g,b=f[g].replace(/http:\/\/[^\/]+/i,"http://data.vod.itc.cn")+"&prot=2&callback="+c+"&id="+RateTest.id++,window[c]=function(a){var b=a.url,c=this.url,d=(c.match(/&id=([0-9]+)/i)||[])[1];if(b){var e=new Date,f=RateTest.addURLItem(b,d,RateTest.requestNextDisURL);RateTest.urlTimeoutTimers[b]=setTimeout(function(){RateTest.URLLoaded(f,e,b,d,null,!0),RateTest.requestNextDisURL()},3e4)}}.bind({url:b}),RateTest.disURLQueue.push(b);RateTest.addURLItem(RateTest.disURLQueue.shift())}else{var i=$(".rate_test .item_"+d).addClass("error");$("time",i).html("!")}}}}))},requestNextDisURL:function(){var a=RateTest.disURLQueue.shift(),b="#rate_test_video",c=$(".rate_test .item .loaded").length;a&&RateTest.addURLItem(a,null,null,b),$(b).html("m3u8 ("+c+"/"+RateTest.videoTsCount+")"),c==RateTest.videoTsCount&&$(".rate_test .button").removeClass("disabled")},addURLItem:function(a,b,c,d){var e=(a.match(/&id=([0-9]+)/i)||[])[1];return e||(e=RateTest.id++),b?$(".rate_test .item_"+b).append(RateTest.getItemHTML(e,a,b)):d?$(d).after(RateTest.getItemHTML(e,a)):$(".rate_test div").append(RateTest.getItemHTML(e,a)),Util.loadScript(a,RateTest.URLLoaded,[e,new Date,a,b,c]),e},getItemHTML:function(a,b){return'<p class="item item_'+a+'"><time>...</time><span>'+b+"</span></p>"},URLLoaded:function(a,b,c,d,e,f){var g=RateTest.urlTimeoutTimers[c];if(g&&(clearTimeout(g),delete RateTest.urlTimeoutTimers[c]),!(c in RateTest.urlTimeoutURLs)){f&&(RateTest.urlTimeoutURLs[c]=1);var h=$(".rate_test .item_"+a).addClass(f?"error":"loaded"),i="",j="",k="",l=((new Date-b)/1e3).toFixed(2);$("time",h).eq(0).html(f?"!":l+" s"),d&&(i=$(".rate_test .item_"+d+" span").html().replace(/&amp;/g,"&")),(j=c.match(/cip=([0-9\.]+)/i))&&(j=j[1],k=c.match(/http:\/\/([^\/]+)/i)[1]);var c=["http://sptjs1.hd.sohu.com.cn/h5/tttst.html","?mode=",RateTest.mode,"&uid=",Cookie.get("SUV")||"","&api=",encodeURIComponent(RateTest.apiURL),"&hotvrs=",encodeURIComponent(RateTest.hotURL),"&disp=",encodeURIComponent(i),"&url=",encodeURIComponent(c),"&clientip=",j,"&cdnip=",k,"&speed=",l,f?"&timeout":""].join("");Util.pingback(c),e&&e()}},addTitle:function(a,b){$(".rate_test div").append('<p class="title" id="'+b+'">'+a+"</p>")}};$(document).ready(RateTest.init),(location.href.match(/player=1/i)||location.host.indexOf("m.sohu.com")>-1)&&(IS_EXTERNAL_PLAYER=!0);var VideoTrace={t:+new Date,playId:+new Date,inited:!1,init:function(){var a=44,b=window.VideoData||window.videoData||{},c="";IsIPad?(a=4,c="1h5"):IsIPhone?(a=41,c="3h5"):IsAndroid?(a=42,c="6h5"):IsWindowsPhone?(a=43,c="11h5"):IsIEMobile&&(a=43),VideoTrace.qcPlat=c,VideoTrace.platType=a,VideoTrace.qfDomain=(Math.random()>.5?"qf1":"qf2")+".hd.sohu.com.cn",VideoTrace.qcURL=null!==URL.getQueryString("r")&&b?"http://sptjs1.hd.sohu.com.cn/h5/tttst.html":"http://qc.hd.sohu.com.cn/caton/video/",VideoTrace.inited=!0},qcPingback:function(a){if(!1===VideoTrace.inited&&VideoTrace.init(),"1h5"!=VideoTrace.qcPlat){var b="",c="",d=window.VideoData||window.videoData||{},e=d.video_src||"",f=d.plid||d.aid||d.sid||"";IsIOS?b=1:IsAndroid?b=2:IsWindowsPhone&&(b=3),IsIPad?c="ipad":/iPod/i.test(UA)?c="ipod":IsIPhone?c="iphone":IsWindowsPhone&&(c="windowsphone");var g="";e.match(/\.m3u8/i)?g="m3u8":e.match(/\.mp4/i)&&(g="mp4"),a+=["&uid=",Cookie.get("SUV")||"","&poid=","&plat=",VideoTrace.qcPlat,"&sver=","&os=",b,"&sysver=",Util.getOSVersion(),"&net=",Trace.getConnectionType(),"&playmode=","&vid=",d.vid||"","&sid=",f,"&vtype=",g,"&pn=",c,"&duFile=",encodeURIComponent(e),"&version=",d.videoVersion||0,"&isp2p=0","&ltype=0","&site=",d.site||"1","&time=",+new Date].join(""),Util.pingback(VideoTrace.qcURL+"?"+a)}},parseChanneledJson:function(){var a={},b=window.VideoData||window.videoData||{},c=Trace.getChanneled(),d=(b.vid||"",location.href||"http://m.tv.sohu.com/");return a.channeled=c||"1212120001",a.href=d,a.clientUid=Trace.getClientUid(),a},qfPingback:function(a){!1===VideoTrace.inited&&VideoTrace.init();var b=window.VideoData||window.videoData||{};a+=["&seekto=0","&pt=",VideoTrace.platType,"&sid=",Cookie.get("SUV")||"","&vid=",b.vid||"","&nid=",b.nid||"","&ref=",encodeURIComponent(location.href),"&dom=","&t=",VideoTrace.t++].join(""),Util.pingback("http://"+VideoTrace.qfDomain+"/dov.do?method=stat"+a)},DMPingback:function(a){var b=Cookie.get("SUV")||"",c=window.VideoData||window.videoData||{},d=VideoTrace.parseChanneledJson(),e=d.channeled,f=d.href||location.href,g=c.plid||c.aid||c.sid||"";a+=["&sid=",b,"&uid=",sid,"&ua=h5","&vid=",c.vid||"","&nid=",c.nid||"","&pid=",g,"&catcode=",c.cateCode||"","&url=",encodeURIComponent(f),"&refer=",encodeURIComponent(document.referrer||"http://m.tv.sohu.com/"),"&isHD=0","&isp2p=0","&type=vrs","&systype=0","&cateid=",c.cid,"&apikey=",API_KEY,"&trans=",$("input.trans").val()||"","&_smuid=",Cookie.get("_smuid")||"-","&site=",c.site||"1","&MTV_SRC=",encodeURIComponent(Trace.getChannelSrc()),"&userid=&t=",VideoTrace.t++].join(""),Util.pingback("http://z.m.tv.sohu.com/"+a+"&channeled="+e),a+="&pvid=",URL.getQueryString("pvid")||""},DMPingbackNew:function(a,b){var c=window.VideoData||window.videoData||{},d=VideoTrace.parseChanneledJson(),e=d.channeled,f=d.href||location.href,g=c.plid||c.aid||c.sid||"";a=$.extend({url:f,refer:document.referrer||"http://m.tv.sohu.com/",uid:Trace.getUid(),webtype:Trace.getConnectionType(),screen:Trace.getScreenSize(),catecode:Trace.getVideoData("cateCode"),pid:g,vid:Trace.getVideoData("vid"),cateid:Trace.getVideoData("cid"),ltype:Trace.getVideoData("ltype"),company:Trace.getVideoData("company"),version:"0",type:"9001"==Trace.getVideoData("cid")?"my":"vrs",td:Trace.getVideoData("duration"),apikey:API_KEY,t:+new Date,os:Trace.getOS(),platform:Trace.getPlatform(),passport:Trace.getPassport(),channeled:e,site:c.site||"1",playid:VideoTrace.playId,nid:c.nid||"",MTV_SRC:encodeURIComponent(Trace.getChannelSrc())},a),Util.pingback((b||"http://z.m.tv.sohu.com/vv.gif")+"?"+$.param(a)),window.flashStatistId&&(a.channeled=window.flashStatistId,Util.pingback((b||"http://z.m.tv.sohu.com/vv.gif")+"?"+$.param(a)))},vv:function(){var a,b=window.VideoData||window.videoData||{};a="undefined"!=typeof b&&"undefined"!=typeof b.duration?b.duration:10,VideoTrace.qfPingback("&error=0&code=2&allno=0&vvmark=1&totTime="+a),IS_EXTERNAL_PLAYER||Util.pingback("http://b.scorecardresearch.com/b?c1=1&c2=7395122&c3=&c4=&c5=&c6=&c11="+(Cookie.get("SUV")||"")),VideoTrace.DMPingbackNew({site:b.site||"1",msg:"playCount",time:"0"}),VideoTrace.playId=+new Date,VideoTrace.qcPingback("code=10&duation=0")},realVV:function(a){{var b=a?(+new Date-a)/1e3:0;window.VideoData||window.videoData||{}}VideoTrace.DMPingbackNew({msg:"videoStart",time:(+new Date-VideoTrace.playId)/1e3}),VideoTrace.qcPingback("code=5&duation="+b)},start:function(){var a=window.VideoData||window.videoData||{};ClickTrace.pingback(null,"video_play_start",JSON.stringify({vid:a.vid})),VideoTrace.qcPingback("code=15")},heart:function(a){VideoTrace.DMPingbackNew({tc:a},"http://z.m.tv.sohu.com/playtime.gif")},ended:function(a,b){VideoTrace.DMPingbackNew({msg:"videoEnds",time:a}),VideoTrace.qcPingback("code=7&duration="+a+"&ct="+b)},abort:function(){VideoTrace.qfPingback("&code=8&error=800&allno=1&drag=-1")},error:function(a){VideoTrace.qfPingback("&error=500&code=2&allno=1&vvmark=0"),VideoTrace.qcPingback("code=8&duation="+(+new Date-a)/1e3+"&error="+(window.VideoData.video_src?"1000":"401"))},buffer:function(a,b){var c=(+new Date-b)/1e3;(1==a||4==a)&&VideoTrace.qfPingback("&code=5&bufno=1&allbufno="+a),VideoTrace.qcPingback("code="+(1==a?6:4)+"&ct="+a+"&duation="+c),null!==URL.getQueryString("r")&&1==a&&"undefined"!=typeof RateTest&&RateTest.startTest("auto")},autoPlay:function(){VideoTrace.qcPingback("code=30")},userClickPlay:function(){VideoTrace.qcPingback("code=31")}},ClickTrace={pingback:function(a,b,c){var b=b||a&&a.attr("position")||"",d=window.VideoData||window.videoData||{},e={},f=Trace.getChanneled(),g=Trace.getVideoData("vid")||"",h=d.plid||d.aid||d.sid||"",i=location.href||"http://m.tv.sohu.com/";c=c||a&&a.attr("details")||"";try{IsWeixin&&(f="1211110001"),e={t:+new Date,uid:Trace.getUid(),position:b,op:"click",details:JSON.stringify(c),nid:Trace.getVideoData("nid")||"",url:encodeURIComponent(i),refer:encodeURIComponent(document.referrer||"http://m.tv.sohu.com/"),screen:Trace.getScreenSize(),os:Trace.getOS(),platform:Trace.getPlatform(),passport:Trace.getPassport(),vid:g||"",pid:h||"",channeled:f,MTV_SRC:encodeURIComponent(Trace.getChannelSrc())}}catch(j){console.log("trace click exception ",j)}Util.pingback("http://z.m.tv.sohu.com/h5_cc.gif?"+$.param(e))}};!function(){"use strict";svp=svp||{};var a=$.userAgent;svp.support={isUseHtml5:function(a){var b=navigator.userAgent,c=null;if(/ipad|ipod|iphone|lepad_hls|IEMobile/gi.test(b))return!0;if(svp.$.os.android){if(svp.support.isSupportMP4(a))return!0;if(svp.$.browser.MQQ&&svp.$.browser.getNumVersion()>=4.2)return!0;if(-1!==b.indexOf("MI-ONE")||-1!==b.indexOf("MI2"))return!0;if(svp.$.os.version>="4"&&(c=b.match(/MicroMessenger\/((\d+)\.(\d+))\.(\d+)/))&&c[1]>=4.2)return!0;if(svp.$.os.version>="4.1")return!0}return svp.support.isSupportMP4(a)||svp.support.isSupportM3u8(a)?!0:svp.$.browser.ie&&svp.$.os.windows&&svp.$.browser.getNumVersion()>=9?!0:!1},isUseHLS:function(){return svp.$.os.ios?!0:!1},isLiveUseHTML5:function(){return svp.$.os.ios?!0:svp.$.os.android&&svp.$.browser.MQQ&&svp.$.browser.getNumVersion()>=4.2?!0:!1},isUseFlash:function(){return svp.$.browser.ie&&svp.$.os.windows?!0:!1},isSupportM3u8:function(){if(svp.isInBlackList("m3u8"))return!1;if(a.isIphone||a.isIpad||"m3u8"===URL.getQueryString("srcType"))return!0;var b=document.getElementsByTagName("video")[0]||document.createElement("video");if("function"==typeof b.canPlayType){var c=b.canPlayType("application/x-mpegURL");if(a.isAndroid&&a.isUCBrowser)return!1;if("probably"===c)return!0;if("maybe"===c)return a.isAndroid&&(a.isBaiduBrowser||a.isQQBrowser)?!0:!1}return!1},isSupportWebm:function(){if(svp.$.os.android&&svp.$.os.version>="4.1")return!0;var a=document.getElementsByTagName("video")[0]||document.createElement("video");return"function"!=typeof a.canPlayType||"probably"!==a.canPlayType('video/webm; codecs="vp8.0, vorbis"')&&"probably"!==a.canPlayType('video/webm; codecs="vp9.0, vorbis"')?!1:!0},isSupportMP4:function(){if(svp.isInBlackList("mp4"))return!1;if(a.isWindowsPhone||a.isFirefoxBrowser||"mp4"===URL.getQueryString("srcType"))return!0;var b=document.getElementsByTagName("video")[0]||document.createElement("video");if("function"==typeof b.canPlayType){if(""===b.canPlayType('video/mp4; codecs="mp4v.20.8"'))return!1;if(""===b.canPlayType('video/mp4; codecs="avc1.42E01E"')||""===b.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'))return!1}return!0},isSupportSVG:function(){return document.implementation&&svp.$.isFunction(document.implementation.hasFeature)?document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"):!1},isEnforceMP4:function(){if(svp.$.os.android){if(svp.$.browser.firefox)return!0;if(svp.$.os.version>="4.0"&&svp.$.browser.MQQ&&svp.$.browser.version<"4.0")return!0}return!1}}}(),function(a){function b(a){return"tagName"in a?a:a.parentNode}function c(a,b,c,d){var e=Math.abs(a-b),f=Math.abs(c-d);return e>=f?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function d(){j=null,k.last&&(k.el.trigger("longTap"),k={})}function e(){j&&clearTimeout(j),j=null}function f(){g&&clearTimeout(g),h&&clearTimeout(h),i&&clearTimeout(i),j&&clearTimeout(j),g=h=i=j=null,k={}}if(!(a.browser.WeChat&&a.browser.getNumVersion()<5||a.os.windows&&a.browser.ie||a.isFunction(a.fn.tap))){var g,h,i,j,k={},l=750;a(document).ready(function(){var m,n;a(document.body).bind("touchstart",function(c){m=Date.now(),n=m-(k.last||m),k.el=a(b(c.touches[0].target)),g&&clearTimeout(g),k.x1=c.touches[0].pageX,k.y1=c.touches[0].pageY,n>0&&250>=n&&(k.isDoubleTap=!0),k.last=m,j=setTimeout(d,l)}).bind("touchmove",function(a){e(),k.x2=a.touches[0].pageX,k.y2=a.touches[0].pageY}).bind("touchend",function(){e(),k.x2&&Math.abs(k.x1-k.x2)>30||k.y2&&Math.abs(k.y1-k.y2)>30?i=setTimeout(function(){k.el&&"function"==typeof k.el.trigger&&(k.el.trigger("swipe"),k.el.trigger("swipe"+c(k.x1,k.x2,k.y1,k.y2)),k={})},0):"last"in k&&(h=setTimeout(function(){if(k.el&&"function"==typeof k.el.trigger){var b=a.Event("tap");b.cancelTouch=f,k.el.trigger(b),k.isDoubleTap?(k.el.trigger("doubleTap"),k={}):g=setTimeout(function(){g=null,k.el&&k.el.trigger("singleTap"),k={}},250)}},0))}).bind("touchcancel",f),a(window).bind("scroll",f)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(b){a.fn[b]=function(a){return this.bind(b,a)}})}}(svp.$),function(a,b){var c={vid:"",liveId:""};a.API_KEY="f351515304020cad28c92f70f002261c",a.API_URL="http://api.tv.sohu.com/",a.API_PROXY_URL="http://m.tv.sohu.com/api/",a.API_PARAMS={api_key:a.API_KEY,plat:"17",sver:"4.0",partner:"78"},a.Helper={formatVideoData:function(a,c){var d=this,e=a,f=c,g=d.getVideoUrls(c),h="";c&&c.aid&&(h=c.aid||"");var i=b.extend(!0,f,e);i.vid=a.vid?a.vid:c.vid||"",i.tvid=a.tvid?a.tvid:c.tv_id||"",i.nid=a.nid?a.nid:c.nid||"",i.sid=a.sid?a.sid:c.aid||h,i.plid=a.plid?a.plid:c.aid||h,i.tvname=c.video_name||this.fotmatBasicParams(a,c,"tvname","tv_name")||"",i.tips=c.tip||this.fotmatBasicParams(a,c,"tips","tip")||"",i.videoCount=a.videoCount?a.videoCount:c.video_count||0,i.videoOrder=a.videoOrder?a.videoOrder:c.video_order||1,i.totalSet=a.totalSet?a.totalSet:c.total_video_count||0,i.cateCode=a.cateCode?a.cateCode:c.cate_code||"",i.setListPageSize=a.setListPageSize?a.setListPageSize:20,i.startTime=a.startTime?a.startTime:c.start_time||0,i.endTime=a.endTime?a.endTime:c.end_time||0,i.totalDuration=a.totalDuration?a.totalDuration:c.total_duration||0,i.downloadSize=a.downloadSize?a.downloadSize:c.file_size_mobile||0,i.playCount=a.playCount?a.playCount:c.play_count||0,i.showDate=a.showDate?a.showDate:c.show_date||"",i.isAds=a.isAds?a.isAds:c.is_ads||0,i.ipLimit=a.ipLimit?a.ipLimit:c.ip_limit||0,i.mobileLimit=a.mobileLimit?a.mobileLimit:c.mobile_limit||0,i.h5Limit=a.h5Limit?a.h5Limit:c.h5_limit||0,i.areaId=a.areaId?a.areaId:c.area_id||6,i.verHighPic=this.fotmatBasicParams(a,c,"verHighPic","ver_high_pic")||c.video_big_pic||c.ver_big_pic||"",i.horHighPic=this.fotmatBasicParams(a,c,"horHighPic","hor_high_pic")||c.video_big_pic||c.hor_big_pic||"",i=b.extend(!0,i,g);var j=["ip_limit","mobile_limit","clips_duration_nor","clips_duration_high","clips_bytes_high","clips_bytes_nor","clips_bytes_super","clips_duration_super","url_nor","url_high","url_super","url_nor_mp4","url_high_mp4","url_super_mp4"];return b.each(j,function(a,b){i.hasOwnProperty(b)&&delete i[b]}),i},fotmatBasicParams:function(a,b,c,d){return b&&b[d]?b[d]:a[c?c:d]||""},formatPlayUrl:function(a){if(a)var b=a.split(","),b=b.length>0&&""!=b[0]?b:[];return b},getVideoUrls:function(a){var b={};return b.durations={nor:a&&a.hasOwnProperty("clips_duration_nor")?this.formatPlayUrl(a.clips_duration_nor):[],hig:a&&a.hasOwnProperty("clips_duration_high")?this.formatPlayUrl(a.clips_duration_high):[],sup:a&&a.hasOwnProperty("clips_duration_super")?this.formatPlayUrl(a.clips_duration_super):[]},b.urls={m3u8:{nor:a&&a.hasOwnProperty("url_nor")?this.formatPlayUrl(a.url_nor):[],hig:a&&a.hasOwnProperty("url_high")?this.formatPlayUrl(a.url_high):[],sup:a&&a.hasOwnProperty("url_super")?this.formatPlayUrl(a.url_super):[]},mp4:{nor:a&&a.hasOwnProperty("url_nor_mp4")?this.formatPlayUrl(a.url_nor_mp4):[],hig:a&&a.hasOwnProperty("url_high_mp4")?this.formatPlayUrl(a.url_high_mp4):[],sup:a&&a.hasOwnProperty("url_super_mp4")?this.formatPlayUrl(a.url_super_mp4):[]},downloadUrl:a&&a.hasOwnProperty("download_url")?this.formatPlayUrl(a.download_url):[]},b
},getParamsOption:function(a,c,d){a=a||{};var e=a.vid||b.getUrlParam("vid"),f=a.site||b.getUrlParam("site");if(a.vid=e?e:"",a.site=f?f:1,c&&(a[c]=a[c]?a[c]||b.getUrlParam(c):d),b.getUrlParam("aid"))try{a.aid=parseInt(b.getUrlParam("aid"))}catch(g){}return a},loadVideoUrlByVid:function(c,d){var e=this,f={};c=e.getParamsOption(c);var g=c.vid,h=c.site,i={};i.api_key=c.api_key||a.API_PARAMS.api_key,i.plat=c.plat||a.API_PARAMS.plat,i.sver=c.sver||a.API_PARAMS.sver,i.partner=c.partner||a.API_PARAMS.partner;var j=c.aid||"",k={site:h};j&&(k.aid=j);var l=a.API_URL+"v4/video/info/"+g+".json?callback=?&"+b.param(b.extend({},i,k));if(""===g)return void console.log("videoinfo vid is null ",l);var m=b.Deferred();return b.ajaxTolerate({url:l,dataType:"jsonp"}).done(function(i){if(i.data){if(f=e.formatVideoData(c,i.data),m.resolve(),!d||!b.isFunction(d))return f;d(f)}else{var j="1"==h?2:1;l=a.API_URL+"v4/video/info/"+g+".json?callback=?&"+b.param(b.extend({},a.API_PARAMS,{site:j})),b.ajax({url:l,dataType:"jsonp",success:function(a){if(a.data){if(i=a,f=e.formatVideoData(c,i.data),m.resolve(),!d||!b.isFunction(d))return f;d(f)}},error:function(){m.reject()}})}}).fail(function(){m.reject()}),m},loadHLSUrlByLiveId:function(d,e){var f={},g={},h=b.Deferred();b.extend(b.extend(f,c),d),f.liveId=0==f.liveId||""==f.liveId?147:f.liveId;var i={};i.api_key=d.api_key||a.API_PARAMS.api_key,i.plat=d.plat||a.API_PARAMS.plat,i.sver=d.sver||a.API_PARAMS.sver,i.partner=d.partner||a.API_PARAMS.partner;var j="http://live.m.tv.sohu.com/api/live/v1/stations/"+f.liveId+"?callback=?&"+b.param({},b.extend({},i,{_rnd:(new Date).valueOf()}));return b.ajaxTolerate({url:j,dataType:"jsonp"}).done(function(a){if(!a.tvStation&&!a.tvStation.id)return{};var c=a.tvStation;return g.liveId=c.id||"147",g.liveName=c.name||"浙江卫视test",g.liveUrl=c.liveUrl||"http://gslb.tv.sohu.com/live?cid=31&ver=seg&ckey=fME9d6wsjgYrRr&type=hls&prot=1&sig=PUP10dOmmowJw8sLRjPStw..&type=hls",g.liveIcon=c.iconBigPic||"",g.liveEnName=c.enName||"",g.ipLimit=c.ipLimit||"0",g.liveId||(g={}),h.resolve(),e&&b.isFunction(e)?void e(g):g}).fail(function(){h.reject()}),h},loadAlbumVideos:function(c,d){var e={},f=b.Deferred(),g=c.aid||c.plid;(0===g||""===g)&&(g=0),c.aid=c.plid=g,c.vid=0===c.vid||""===c.vid?"":c.vid,c.site=c.site||1,c.page_size=c.page_size||c.pageSize||20,c.with_trailer=c.with_trailer||0;var h={};h.api_key=c.api_key||a.API_PARAMS.api_key,h.plat=c.plat||a.API_PARAMS.plat,h.sver=c.sver||a.API_PARAMS.sver,h.partner=c.partner||a.API_PARAMS.partner;var i="http://api.tv.sohu.com/v4/album/videos/"+c.plid+".json?page_size="+c.page_size+"&with_trailer="+c.with_trailer;if(i+="&"+b.param(h),c.vid&&0!=c.vid&&""!=c.vid?i+="&vid="+c.vid+"&site="+(c.site||1):(c.page=c.page||1,i+="&page="+c.page),c.cid&&0!=c.cid&&""!=c.cid&&[76,7,13,24].indexOf(parseInt(c.cid))>-1&&(i+="&order=1"),d&&b.isFunction(d)){var j=b.getFnName(d);i+="&callback=?&_cb="+j}return b.ajaxTolerate({url:i,dataType:"jsonp"}).done(function(a){return e=a&&a.data?a:{},f.resolve(),d&&b.isFunction(d)?void d(e):e}).fail(function(){f.reject()}),f},loadSearchRecommend:function(c,d){var e={},f={},g=b.Deferred();e.vid=0==c.vid||""==c.vid?"":c.vid,e.cid=c.cid||0,e.page_size=c.page_size||c.pageSize||10,e.page=1,e.api_key=c.api_key||a.API_PARAMS.api_key,e.plat=c.plat||a.API_PARAMS.plat,e.sver=c.sver||a.API_PARAMS.sver,e.partner=c.partner||a.API_PARAMS.partner;var h="http://api.tv.sohu.com/v4/search/recommend.json?_from=h5&"+b.param(e);if(d&&b.isFunction(d)){var i=b.getFnName(d);h+="&callback=?&_cb="+i}return b.ajaxTolerate({url:h,dataType:"jsonp"}).done(function(a){return f=a&&a.data?a:{},g.resolve(),d&&b.isFunction(d)?void d(f):f}).fail(function(){g.reject()}),g},loadAlbumInfo:function(c,d){var e={},f={},g=b.Deferred();e.aid=c.aid||c.plid||0,e.api_key=c.api_key||a.API_PARAMS.api_key,e.plat=c.plat||a.API_PARAMS.plat,e.sver=c.sver||a.API_PARAMS.sver,e.partner=c.partner||a.API_PARAMS.partner;var h="http://api.tv.sohu.com/v4/album/info/"+e.aid+".json?_from=h5&"+b.param(e);if(d&&b.isFunction(d)){var i=b.getFnName(d);h+="&callback=?&_cb="+i}return b.ajaxTolerate({url:h,dataType:"jsonp"}).done(function(a){return f=a&&a.data?a:{},g.resolve(),d&&b.isFunction(d)?void d(f):f}).fail(function(){g.reject()}),g},loadAlbumSeriesByProgramId:function(c,d){var e={},f={},g=b.Deferred();e.aid=c.aid||c.plid||0,e.program_id=c.program_id||0,e.api_key=c.api_key||a.API_PARAMS.api_key,e.plat=c.plat||a.API_PARAMS.plat,e.sver=c.sver||a.API_PARAMS.sver,e.partner=c.partner||a.API_PARAMS.partner;var h="http://api.tv.sohu.com/v4/program/"+e.program_id+".json?_from=h5&"+b.param(e);if(d&&b.isFunction(d)){var i=b.getFnName(d);h+="&callback=?&_cb="+i}return b.ajaxTolerate({url:h,dataType:"jsonp"}).done(function(a){return f=a&&a.data?a:{},g.resolve(),d&&b.isFunction(d)?void d(f):f}).fail(function(){g.reject()}),g},loadAlbumSeriesDataByPlid:function(b,c){var d={},e=this;d.aid=b.aid||b.plid||0,d.program_id=b.program_id||0,d.api_key=b.api_key||a.API_PARAMS.api_key,d.plat=b.plat||a.API_PARAMS.plat,d.sver=b.sver||a.API_PARAMS.sver,d.partner=b.partner||a.API_PARAMS.partner,d.page_size=50,d.page=1,e.loadAlbumInfo(d,function(a){d.page_size=a&&a.data.latest_video_count?a.data.latest_video_count:50,e.loadAlbumVideos(d,c)})}}}(svp,svp.$);var svp=svp||{};!function(svp){"use strict";var Action={URLProtocol:"sohuvideo"+(IsIPad?"hd":"")+"://",openTime:IsIOS?800:1e3,appChanneled:1000120001,channelSrc:"0",appointUrl:"",maxEffectiveTime:72e5,appPortArr:["23456","23457"],appInfoReqCounts:0,getDownloadUrl:function(a,b){var c=this;if(a&&a.downUrl)b(a.downUrl);else if(""!==this.appointUrl)b(this.appointUrl);else{var d=a&&a.channelSrc?a.channelSrc:this.channelSrc;(d+"").length>4&&(d=d.substr(0,4));var e="http://m.tv.sohu.com/h5/cooperation/"+d+".json?pos=1&platform="+Util.getUserPt()+"&callback=?";console.log("获取下载链接ajax:",e),$.ajax({url:e,type:"get",dataType:"jsonp",success:function(a){var d;a&&a.records.length>0&&(d=c.appointUrl=a.records[0].link),b(d&&""!==d?d:Action.getSohuDefaultApplink())},error:function(){b(Action.getSohuDefaultApplink())}})}},gotoDownload:function(a){this.getDownloadUrl(a,function(b){if(""!==b){var c=a&&a.delayTime?a.delayTime:Action.openTime;setTimeout(function(){window.location.href=b},c)}})},openIos:function(a,b){if(a){ClickTrace.pingback(null,"app2_ios_action");var c=document.createElement("iframe");c.style.display="none";var d,e=document.body,f=function(a,d){b&&"function"==typeof b&&b(d),window.removeEventListener("pagehide",g,!0),window.removeEventListener("pageshow",g,!0),c&&(c.onload=null,e.removeChild(c),c=null)},g=function(a){clearTimeout(d),f(a,!1)};window.addEventListener("pagehide",g,!0),window.addEventListener("pageshow",g,!0),c.onload=f,c.src=a,e.appendChild(c);var h=+new Date;d=setTimeout(function(){d=setTimeout(function(){var a=+new Date;h-a>1300?f(null,!1):f(null,!0)},1200)},60)}},openAndroid:function(a,b){if(a){-1!==a.indexOf("svawebsocket")&&ClickTrace.pingback(null,"app1_android_action");var c=URL.getQueryString("src")||URL.getQueryString("SRC")||"",d=URL.getQueryData(location.search.substring(1));if((/SAMSUNG-SM-G90|SAMSUNG[\s-]+SM-N900|Nexus\s5|SM701/i.test(UA)||"undefined"!=typeof a&&a.indexOf("intent")>-1||/UCBrowser/i.test(UA))&&-1===a.indexOf("svawebsocket")||"2"===d.startClient&&""!==c)window.location.href=a;else{var e=document.createElement("iframe");e.style.display="none",e.src=a;var f=document.body;f.appendChild(e),setTimeout(function(){f.removeChild(e),e.onload=null,e=null},200)}b&&"function"==typeof b&&b()}},sendAction:function(a,b){var c=Action.makeActionUrl(a),d=URL.getQueryData(location.search.substring(1));if("2"===d.startClient&&ClickTrace.pingback(null,"appdownload_jump"),IsAndroid)Action.openAndroid(c,b);else if(IsIOS)Action.openIos(c,b);else{var e=this.getIframe();e.attr("src",c)}},byAppDownload:function(a,b){var c=Action.makeActionUrl(a);if(IsAndroid)Action.openAndroid(c,b);else if(IsIOS)Action.openIos(c,b);else{var d=this.getIframe();d.attr("src",c)}},getIframe:function(){var a=$("#j_redirectNativeFrame");return 0===a.length&&(a=$('<iframe id="j_redirectNativeFrame" style="display:none"></iframe'),$("body").append(a)),a},getPopTipsView:function(){var a=[];return a.push('<div class="app_download_select js_download_select" style="display: none;">'),a.push('<div class="app_download_title js_download_select_title"></div>'),a.push('<div class="app_downlaod_btn app_downlaod_left js_download_select_left">立刻安装</div>'),a.push('<div class="app_downlaod_btn app_downlaod_right js_download_select_right">关闭</div>'),a.push("</div>"),a.push('<div class="download_masklayer js_download_masklayer" style="display: none;"></div>'),a.join("")},popTips:function(a,b){var c=$(".js_download_select"),d=$(".js_download_masklayer");0===c.length&&($("body").append(this.getPopTipsView()),c=$(".js_download_select"),d=$(".js_download_masklayer"),$(".js_download_select_left").on(END_EVENT,function(){Action.gotoDownload(),c.oriHide(),d.oriHide()}),$(".js_download_select_right").on(END_EVENT,function(){c.oriHide(),d.oriHide()}));var e=a&&a.title?a.title:"高速观看需安装搜狐视频客户端";$(".js_download_select_title",c).html(e),d.oriShow(),c.oriShow(),$.isFunction(b)&&b()},isIntentList:function(){var a=!1;return IsAndroid&&/SAMSUNG-SM-G90|SAMSUNG[\s-]+SM-N900|Nexus\s5/i.test(UA)&&(a=!0),a},isForceIntent:function(){var a=!1;return IsAndroid&&Action.isIntentList()&&!/UCBrowser/i.test(UA)&&(a=!0),a},getAppChanneled:function(){var a=window.VideoData||window.videoData||{},b=URL.getQueryString("channeled")||a.channeled||Action.appChanneled,c=location.href||"http://m.tv.sohu.com/";try{(c.indexOf("hots")>-1||c.indexOf("/x")>-1)&&(b=a.channeled||URL.getQueryString("channeled")||Action.appChanneled)}catch(d){channeld=Action.appChanneled,console.log(d)}return b},makeActionUrl:function(a){var b=Action.URLGlobalParms;a.scheme=b.clientType&&"1"===b.startClient||!Cookie.test()?"sohuvideo":"1"===b.startClient||Action.isForceIntent()?"intent":"sohuvideo";var c=a.scheme,d=a.action||a.actionVer||"1.1",e=a.cateCode||"",f=a.channeled||Action.getAppChanneled();e=e.toString().split(",")[0]||"",e=e.split(";")[0]||"",a=Action.formatArgs(a);var g={action:d,vid:a.vid||"",sid:a.sid||"",cid:a.cid||"",cateCode:e,ex1:a.ex1||1,ex2:a.ex2||"",ex3:a.ex3||"",site:a.site||"",enterid:"4_"+f,more:{sourcedata:{getad:a.getad||1,preid:location.href}}};"2.4"===d&&(g.ex2=g.cid,IsIOS&&(g.cid=g.cateCode)),"1.1"===d&&"undefined"==typeof a.vid&&delete g.vid,a&&a.action&&a.site&&"2"===a.site&&(g.ex3=2,g.sid="",g.site="2"),a&&a.more&&(g.more=a.more,a.more.sourcedata&&(a.more.sourcedata.getad=a.getad||1)),g.more.hasOwnProperty("sourcedata")||(g.more.sourcedata={preid:location.href}),c?c=c.replace("://",""):(c=Action.URLProtocol,c=c.replace("://",""));var h="";if(IsAndroid)if(c.indexOf("intent")>-1){h="intent://",h+="?"+URL.objToQueryString(g).replace(/index\.html%2C/,"index.html");var i="#Intent;scheme=sohuvideo;package=com.sohu.sohuvideo;end";h+=i,console.log("android intent 1:",JSON.stringify(g))}else h=c+"://",h+="action.cmd",h+="?"+URL.objToQueryString(g).replace(/index\.html%2C/,"index.html"),console.log("android intent 2:",JSON.stringify(g));else console.log("android sohovideo:",JSON.stringify(g)),console.log("android sohovideo:###",c),h=Action.URLProtocol,h+="action.cmd",h+="?"+URL.objToQueryString(g).replace(/index\.html%2C/,"index.html");return console.log("makeActionUrl : "+h),h},getSohuDefaultApplink:function(){return Util.getSohuDefaultApplink()},URLGlobalParms:{},updateGlobalParms:function(a,b){var c,d=$("a[href],form",a),e=d.length;for(b=b||Action.URLGlobalParms;e--;)c=d.get(e),URL.setQueryString(c,b)},formatArgs:function(a){var b=a.vid||"",c=a.sid||"",d=a.url||window.location.href,e=a.action+""||"1.1";if(!a)return a;if(b||c){if(a.action=e,"1.1"===e&&(9001===a.cid||"2"===a.site)&&(a.ex3=2,a.sid="",a.site="2"),"1.19"===e||"1.20"===e){if(!b)return;d=d.split("?")[0],a.urls=d,a.ex1="",a.ex2="",a.ex3="","1.20"===e&&(a.urls=d.replace(/play/,"index")+","+d)}"1.17"===e&&(a.ex1=a.ex1||1,a.ex2=a.ex2||"",a.ex3=a.ex3||"",2===a.ex1&&(a.open=1))}else(a.live||d.match(/live/i)||d.match(/\.m3u8/i))&&(a.action=a.action||"1.1",a.ex1=a.ex1||3);return a},parserUrls:function(){!StartClient||Action.URLGlobalParms.clientType||Action.URLGlobalParms.actionVer||URL.setQueryString(this,{startClient:1});for(var a,b=["clientType","clientVer","actionVer","startClient","actionId"],c=b.length,d=URL.getQueryData(location.search.substring(1)),e={};c--;)a=b[c],d.hasOwnProperty(a)&&d[a]&&(e[a]=d[a]);Action.updateGlobalParms(DOC,e),Action.URLGlobalParms=e},parserAttributes:function(data,el){for(var videoParmsKeys=["vid","cid","sid","plid","cateCode","site"],c=videoParmsKeys.length,URLParms=Action.URLGlobalParms,vd=data||window.VideoData||window.videoData||{},args={};c--;){var key=videoParmsKeys[c];vd&&vd[key]&&(args[key]=vd[key]),URLParms&&URLParms.hasOwnProperty(key)&&URLParms[key]&&(args[key]=URLParms[key])}var channeled=URLParms.channeled||Action.getAppChanneled(),more={sourcedata:{preid:location.href}},vid=args.vid||"",sch=Action.URLProtocol,downUrl=args.downUrl||"",actionId=args.actionId||args.actionVer||"1.17";if("undefined"!=typeof el){el=$(el),channeled=el.attr("channeled")||channeled,vid=el.attr("vid")||vid;var _sch=el.attr("data-scheme");_sch&&(sch=_sch.toLowerCase()),downUrl=el.attr("data-downUrl")||el.attr("data-downurl")||downUrl,actionId=el.attr("actionId")||el.attr("actionid")||"1.17",args.action=actionId,args.vid=vid,args.channeled=channeled,args.scheme=sch,args.downUrl=downUrl,args.enterid="4_"+channeled;try{var _params=eval(el.attr("data-params"))||[];for(var i in _params){var jsonObj=_params[i]||{};jsonObj&&$.extend(!0,args,jsonObj)}}catch(e){console.log(e)}}return vd.site&&"2"===vd.site?args.ex3=2:args.ex1=1,more.sourcedata.channeled=channeled,args.more=more,args.action=actionId,args=Action.formatArgs(args),args.scheme=sch,args.downUrl=downUrl,console.log("parserAttributes:",JSON.stringify(args)),args},init:function(){this.parserUrls(),this.URLProtocol="sohuvideo"+(IsIPad?"hd":"")+"://",this.channelSrcInit()},channelSrcInit:function(){var a=URL.getQueryString("src")||URL.getQueryString("SRC")||"0";this.channelSrc=a.split("|")[0]||"0"},addIosMeta:function(){var a,b,c,d=document.createElement("meta");IsIOS&&(IsIPhone&&(a="https://itunes.apple.com/cn/app/sou-hu-shi-pin-gao-qing/id458587755?mt=8",content="app-id=458587755",content+=", app-argument=sohuvideo://action.cmd ",content+=", affiliate-data=mt=8",d.setAttribute("content",content),d.setAttribute("name","apple-itunes-app"),b=document.getElementsByTagName("meta"),c=b[0].parentNode,c.appendChild(d)),IsIPad&&(a="https://itunes.apple.com/cn/app/sou-hu-shi-pin-gao-qing/id458587755?mt=8",content="app-id=414430589",content+=", app-argument=sohuvideo://action.cmd ",content+=", affiliate-data=mt=8",d.setAttribute("content",content),d.setAttribute("name","apple-itunes-app"),b=document.getElementsByTagName("meta"),c=b[0].parentNode,c.appendChild(d)))},bindAction:function(){var a="ontouchstart"in window?"touchend":"mouseup";$("body").on(a,".actionLink",function(){var a=this,b=window.VideoData||window.videoData||{},c=Action.parserAttributes(b,a);console.log("params",c),Action.sendAction(c)}),$("body").on("click",".hotActionLink",function(){var a=this,b=window.VideoData||window.videoData||{},c=Action.parserAttributes(b,a);console.log("params",c),c&&c.site&&"2"===c.site&&(c.ex3=2),IsIOS?(c.action="2.4",c.cid="9006"):c.action="1.1",Action.sendAction(c)})},makeWebActionUrl:function(a){var b=Action.URLGlobalParms,c="svawebsocket";b.clientType&&"1"===b.startClient||!Cookie.test()?c="svawebsocket":a.sch?c=a.sch:("1"===b.startClient||Action.isForceIntent())&&(c="intent");var d={action:"1.1",enterid:"4_"+Action.getAppChanneled(),more:{sourcedata:{preid:location.href}}},e="";if(IsAndroid)if(c.indexOf("intent")>-1){e="intent://",e+="?"+URL.objToQueryString(d).replace(/index\.html%2C/,"index.html");var f="#Intent;scheme=svawebsocket;package=com.sohu.sohuvideo;end";e+=f,console.log("android intent 1:",JSON.stringify(d))}else e=c+"://",e+="action.cmd",e+="?"+URL.objToQueryString(d).replace(/index\.html%2C/,"index.html"),console.log("android intent 2:",JSON.stringify(d));else console.log("android sohovideo:###",c),e="svawebsocket://",e+="action.cmd",e+="?"+URL.objToQueryString(d).replace(/index\.html%2C/,"index.html");return console.log("makeWebActionUrl : "+e),e},sendWebAction:function(a,b,c){var d=this,e=Action.makeWebActionUrl(a);if(console.log("start websocket url: "+e),IsAndroid)Action.openAndroid(e,b);else if(IsIOS)Action.openIos(e,b);else{var f=this.getIframe();f.attr("src",e)}setTimeout(function(){Action.getAppInfoByAjax(a,function(b){null===b&&d.appPortArr.length-1>=d.appInfoReqCounts?Action.getAppInfoByAjax(a,function(a){c(a)}):c(b)})},200)},getAppInfoByAjax:function(a,b){var c,d=a&&a.ip?a.ip:"127.0.0.1";a&&a.port?c=a.port:this.appPortArr[this.appInfoReqCounts]?(c=this.appPortArr[this.appInfoReqCounts],this.appInfoReqCounts++):c="23456";var e="http://"+d+":"+c+"/?t=1&k=sohu1234&callback=?";console.log("ajax getAppInfoByAjax url: "+e);var f=null;$.ajax({url:e,dataType:"jsonp",success:function(a){console.log("success:  "+JSON.stringify(a)),b&&"function"==typeof b&&b(a)},error:function(a){console.log("error: "+JSON.stringify(a)),b&&"function"==typeof b&&b(f)}})},appInfoCheck:function(a){var b=["AndroidPhone","AndroidPad","iPhone","iPad","WindowsPhone","WindowsPad"];if(a){var c=a.name&&"sohuVideo"===a.name?!0:!1,d=a.clientType&&-1!==$(b).indexOf(a.clientType)?!0:!1,e=a.clientVer?!0:!1;if(c&&d&&e)return!0}return!1},getAppInfo:function(a){var b=this,c=Storage.get("localAppInfo");if(c&&c.time&&Date.now()-c.time<this.maxEffectiveTime)"function"==typeof a&&a(c);else{var d={};d.sch="svawebsocket",Action.sendWebAction(d,null,function(c){b.appInfoCheck(c)?(c.time=Date.now(),Storage.set("localAppInfo",c)):c=null,"function"==typeof a&&a(c)})}}};Action.init(),onDomReady(Action.bindAction),window.Action=Action,svp.playInClient=function(a){var b={param:{conDom:null,settings:null,firstLoadFlag:!0},model:{videoData:null,channeled:Action.appChanneled,urlParam:{}},view:{},ctrl:{}},c=b.param,d=b.model,e=b.view,f=b.ctrl;c.init=function(a){$.isUndefined(a.parentDom)||0===$(a.parentDom).length||(c.conDom=$(a.parentDom)),$.isUndefined(a.settings)||(c.settings=a.settings)},d.init=function(a){return $.isUndefined(a.videoData)?!1:(d.videoData=a.videoData,$.isUndefined(a.channeled)&&(d.channeled=a.channeled),d.urlParam=URL.getQueryData(location.search.substring(1)),!0)},d.getClientUrl=function(a){var b=URL.getQueryData(location.search.substring(1));(b.clientType||"1"==b.startClient)&&(a.scheme="sohuvideo");var c=Action.makeActionUrl(a);return c},e.download=function(){var a=[];return a.push('<div class="appdl_download2">'),a.push('<div class="msg_block">'),a.push('<span class="msg">体验高清视频,请使用</span>'),a.push('<a href="javascript:void(0);" class="actionLink">搜狐视频客户端</a>'),a.push("</div>"),a.push("</div>"),a.join("")},f.init=function(a){c.init(a),d.init(a)&&(null!==c.conDom&&$(c.conDom).append(e.download()),Action.sendAction(Action.parserAttributes()),c.firstLoadFlag&&(c.firstLoadFlag=!1),setTimeout(function(){VideoTrace.realVV(+new Date)},200))},f.init(a)}}(svp),WeixinJS="undefined"==typeof WeixinJS?{}:WeixinJS,WeixinJS.hideOptionMenu=function(){"undefined"!=typeof WeixinJSBridge&&document.addEventListener("WeixinJSBridgeReady",function(){WeixinJSBridge.call("hideOptionMenu")})},WeixinJS.hideToolbar=function(){"undefined"!=typeof WeixinJSBridge&&document.addEventListener("WeixinJSBridgeReady",function(){WeixinJSBridge.call("hideToolbar")})};var getVideoMetaData=function(){for(var a=document.getElementsByTagName("meta"),b={},c=0;c<a.length;c++){var d=a[c].getAttribute("name"),e=a[c].getAttribute("property"),f=a[c].getAttribute("content")||"";(null==d||void 0==d||0==d.length)&&(d=e),null!=d&&void 0!=d&&0!=d.length&&(b[d]=f)}return b};WeixinJS.getVideoMetaData=window.getVideoMetaData=getVideoMetaData;var videoMetaData=getVideoMetaData();WeixinJS.dataForWeixin={appId:"wxb6c82517aa33d525",MsgImg:videoMetaData["og:image"]||"http://css.tv.itc.cn/global/images/nav1/logo.gif",TLImg:videoMetaData["og:image"]||"http://css.tv.itc.cn/global/images/nav1/logo.gif",url:videoMetaData["og:url"]||encodeURIComponent(window.location.href),imgWidth:videoMetaData["og:imgWidth"]||"120",imgHeight:videoMetaData["og:imgHeight"]||"120",title:videoMetaData["og:title"]||document.getElementsByTagName("title")[0].text.split(" ")[0]||"",desc:videoMetaData.description||document.getElementsByTagName("title")[0].text.split(" ")[0]||"",callback:function(){}},function(){var a=function(){if("undefined"!=typeof WeixinJSBridge){var a=WeixinJS.dataForWeixin;if("undefined"!=typeof a){var b=a.title;b.indexOf("搜狐视频")>-1||(b+="-搜狐视频",a.title=b),WeixinJSBridge.on("menu:share:appmessage",function(){WeixinJSBridge.invoke("sendAppMessage",{appid:a.appId,img_url:a.MsgImg,img_width:a.imgWidth,img_height:a.imgHeight,link:a.url,desc:a.desc,title:a.title},function(b){"send_app_msg:ok"==b.err_msg&&console.log(b.err_msg),a.callback()})}),WeixinJSBridge.on("menu:share:timeline",function(){a.callback(),WeixinJSBridge.invoke("shareTimeline",{img_url:a.TLImg,img_width:a.imgWidth,img_height:a.imgHeight,link:a.url,desc:a.desc,title:a.title},function(a){"share_timeline:ok"==a.err_msg&&console.log(a.err_msg)})}),WeixinJSBridge.on("menu:general:share",function(b){var c="#分享视频#"+a.title;IsIOS&&(c+=a.url),b.generalShare({type:"video",content:c,title:a.title,desc:a.desc,img_url:a.TLImg,img_width:a.imgWidth,img_height:a.imgHeight,link:a.url,data_url:a.url},function(a){WeixinJSBridge.log(a.err_msg)})}),WeixinJSBridge.on("menu:share:weibo",function(){WeixinJSBridge.invoke("shareWeibo",{content:a.title,url:a.url},function(b){"share_weibo:ok"==b.err_msg&&console.log(b.err_msg),a.callback()})})}}};document.addEventListener?document.addEventListener("WeixinJSBridgeReady",a,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",a),document.attachEvent("onWeixinJSBridgeReady",a))}();