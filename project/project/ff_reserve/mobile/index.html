<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>最终幻想觉醒-预约</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no"/>

    <link rel="stylesheet" href="http://auv.game.weibo.cn/auv/api/server/platform/css/october/light7.min.css">
    <link rel="stylesheet" href="css/ff_reserve_1207.css">
    <link rel="stylesheet" href="css/swiper-3.4.0.min.css">


    <div id='wx_pic' style='margin:0 auto;display:none;'>
        <img src='img/300x300.png' />
    </div>


</head>
<body>

<!-- body -->
<div class="page-group">


    <!--禁止横屏操作，现在已经无效-->
    <div class="page" id="page-lanscape" style="display: none">
        <!-- 这里是横竖屏内容 -->
        <div class="content">
            <div class="screen-down">
                <img src="http://mg.games.sina.com.cn/kjava/auvpics/promote_1118/screen_prompt.png" alt="">
                <strong>请使用竖屏进行游戏</strong>
            </div>
        </div>
    </div>




    <!--页面起始-->
    <div class="page page-current" id="page-draw">

        <div class="content drawing">

            <img border="0" src="default/image/ff_reserve_1207/section_1_bg.jpg" class="bg-top" width="100%" alt="">


            <!--预约组-->
            <div class="reserve">
                <div class="reserv-btn-group">
                    <img src="default/image/ff_reserve_1207/reserve_btn.png" class="reserve-now-btn-bg"  alt="">
                </div>
                <div class="agreement-check">
                    <div class="piaochecked on_check">
                        <input name="need_inv" type="checkbox" style="height:20px;width:20px;" class="radioclass input" value="1">
                    </div>
                    <div class="check-content">
                        <label>
                            分享至微博
                        </label>
                    </div>
                </div>
            </div>


            <img src="default/image/ff_reserve_1207/video_avatar.jpg" class="video-avatar" alt="">


            <img src="default/image/ff_reserve_1207/section_2_bg.jpg" class="section_2_bg" alt="">


            <!--轮播图-->
            <div class="section_3">
                <div class="swiper-container">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <img src="default/image/ff_reserve_1207/swiper_img_1.jpg" alt="">
                        </div>
                        <div class="swiper-slide">
                            <img src="default/image/ff_reserve_1207/swiper_img_2.jpg" alt="">
                        </div>
                        <div class="swiper-slide">
                            <img src="default/image/ff_reserve_1207/swiper_img_3.jpg" alt="">
                        </div>
                        <div class="swiper-slide">
                            <img src="default/image/ff_reserve_1207/swiper_img_4.jpg" alt="">
                        </div>
                        <div class="swiper-slide">
                            <img src="default/image/ff_reserve_1207/swiper_img_5.jpg" alt="">
                        </div>
                    </div>
                </div>
                <div class="swiper-pagination"></div>

            </div>


            <img src="default/image/ff_reserve_1207/section_bottom_bg.jpg" class="section_bottom_bg" alt="">


        </div>
    </div>

    <!-- first Popup -->
    <div class="popup popup-insert-num">
        <div class="content-padded content-popup">
            <img src="default/image/ff_reserve_1207/close-btn.png" class="close-btn" alt="">
            <div class="modal-input-title">
                请输入手机号以完成预约
            </div>


            <div class="search-input">
                <input type="tel" id="phone_num" class="phone_num_insert" placeholder='请输入手机号'/>
            </div>

            <p class="warning">手机号有误，请重新输入</p>

            <p class="reserve-now-btn"><a href="#"  class="button button-reserve button-fill">确认预约</a></p>

            <p class="memo">
                游戏上线时会通过短信第一时间通知你 <br>
                我们保证将对手机号码完全保密
            </p>

        </div>

    </div>

    <!-- success Popup -->
    <div class="popup popup-success">
        <div class="content-padded content-popup">
            <div class="modal-input-title">
                预约成功
            </div>

            <p class="warning">手机号有误，请重新输入</p>


            <p class="memo">
               敬请期待
            </p>

            <p class="reserve-now-btn"><a href="#" class="button close-popup button-reserve-back button-fill">返回</a></p>
        </div>
    </div>

    <!-- video Popup -->
    <div class="popup popup-video">
        <div class="content-padded content-popup">

            <img src="default/image/ff_reserve_1207/close-btn.png" class="close-btn closeVideo" alt="">
            <!--<embed  src="http://video.weibo.com/player/1034:04d93950095012551d7b9b3acf3f57c3/v.swf"/>-->
            <!--<embed id="videoNew" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" wmode="transparent" quality="high" height="480" width="480" src="http://video.weibo.com/player/1034:04d93950095012551d7b9b3acf3f57c3/v.swf"/>-->

            <video id="videoPlayer" >
                <source src="video/ff.mp4" preload type="video/mp4">
                <!--<source src="/i/movie.ogg" type="video/ogg">-->
                您的浏览器不支持 video 标签。
            </video>
            <!--<object data="http://video.weibo.com/player/1034:04d93950095012551d7b9b3acf3f57c3/v.swf" type="application/x-shockwave-flash">-->
                <!--<param name="movie" value="demo.swf"/>-->
            <!--</object>-->
        </div>

    </div>



</div>

<script type='text/javascript' src='http://auv.game.weibo.cn/auv/api/server/platform/js/october/jquery.min.js'></script>
<script type='text/javascript' src='http://auv.game.weibo.cn/auv/api/server/platform/js/october/light7.min.js' charset='utf-8'></script>
<script type='text/javascript' src='js/swiper-3.4.0.jquery.min.js' charset='utf-8'></script>

<script>
    $(function () {

        //初始化大小
        var documentW = $(window).width();
        var documentH = $(window).height();






        //因为位置参数为js获取，所有load一下
        $(window).load(function(){
            //获取图片的高度
            var bgH = $('.bg-top').height();
            //获取图片比例基数
            var pi = documentW /bgH;
            //横屏状态下图片的高度，用屏幕高度除以基数
            var lanscape = window.screen.height / pi;
            var verReserveTop = bgH*.62;
            var lanReserveTop = lanscape*.62;
            //获取轮播图图片宽度
            var a  = $('.swiper-slide img').height();

            $('.section_3').height(a + 80);
            console.log(a);

            $('.reserve').css({'top':verReserveTop});

            //判断手机横屏竖屏的方法
            window.addEventListener("onorientationchange" in window ? "orientationchange" : "resize", function () {
                if (window.orientation === 180 || window.orientation === 0) {
                    $('#page-lanscape').removeClass('page-current').css({'display': 'none'});
                    $('#page-draw').addClass('page-current').css({'display': 'block'});
                    $('.logo,.go2index').css({'top':'2.5%'});
                    $('.reserve').css({'top':verReserveTop});
                    $('.agreement-check').css({'font-size':'.65em'});
                    $('.swiper-slide img').css({'width':'100%'})

                }
                if (window.orientation === 90 || window.orientation === -90) {
                    $('.logo,.go2index').css({'top':'10%'});
                    $('.reserve').css({'top':lanReserveTop});
                    $('.agreement-check').css({'font-size':'.7em'});
                    $('.swiper-slide img').css({'width':'50%'})

                }
            }, false);
        });



        //浏览器电脑还是手机
        function browserRedirect() {
            var sUserAgent = navigator.userAgent.toLowerCase();
            var bIsIpad = sUserAgent.match(/ipad/i) == "ipad";
            var bIsIphoneOs = sUserAgent.match(/iphone os/i) == "iphone os";
            var bIsMidp = sUserAgent.match(/midp/i) == "midp";
            var bIsUc7 = sUserAgent.match(/rv:1.2.3.4/i) == "rv:1.2.3.4";
            var bIsUc = sUserAgent.match(/ucweb/i) == "ucweb";
            var bIsAndroid = sUserAgent.match(/android/i) == "android";
            var bIsCE = sUserAgent.match(/windows ce/i) == "windows ce";
            var bIsWM = sUserAgent.match(/windows mobile/i) == "windows mobile";
            if (bIsIpad || bIsIphoneOs || bIsMidp || bIsUc7 || bIsUc || bIsAndroid || bIsCE || bIsWM) {

                //swiper 图片轮播
                var swiper = new Swiper('.swiper-container', {
                    slidesPerView : 2,
                    pagination : '.swiper-pagination',
                    // autoHeight:true,
                    nextButton: '.next-btn',
                    prevButton: '.prev-btn',
                    spaceBetween : 15,
                    loop:true,
                    loopedSlides :8
                });
            } else {
                $(".page,.popup").css({'width': documentH / 1.775, 'left': (documentW - documentH / 1.775) / 2});
                // $(".reserve").css({'top': '64%'});
                $('.reserve-now').css({'font-size': '1.5em'});

                //swiper 图片轮播
                var swiper = new Swiper('.swiper-container', {
                    slidesPerView : 3,
                    pagination : '.swiper-pagination',
                    // autoHeight:true,
                    nextButton: '.next-btn',
                    prevButton: '.prev-btn',
                    spaceBetween : 20,
                    loop:true,
                    loopedSlides :8
                });
            }
        }
        browserRedirect();



        // 多选
        $(".piaochecked").on("click", function () {
            $(this).toggleClass("on_check");
        });


        var share_webo = 1;

        //输入框
        $(document).on('click','.reserv-btn-group', function () {
            if($('.piaochecked').hasClass('on_check')){
                share_webo =1
            }else{
                share_webo =0
            }
            $.popup('.popup-insert-num');
        });


        //关闭输入框
        $(document).on('click','.close-btn', function () {
            $.closeModal()
        });






        //预约
        $(document).on('click','.button-reserve', function () {
            console.log($(this));
            var phone_num = $('.phone_num_insert').val();
            console.log(phone_num);
            var reg = /^0?1[3|4|5|8][0-9]\d{8}$/;
            var device_select = $('.choose-device').attr('device-select');
            if (reg.test(phone_num)) {
                console.log('前端判断此手机号为真实号码');
                $.showPreloader('请稍后...');
                setTimeout(function () {
                    $.hidePreloader();
                    $.closeModal();
                    $.popup('.popup-success');
                }, 2000);
            }else{
                $('.popup-insert-num .warning').text('手机号有误，请重新输入').show();
            }

        });




        //视频播放
        $(document).on('click','.video-avatar', function () {
            console.log($(this));
            $.popup('.popup-video');
            var x = document.getElementById("videoPlayer");
            console.log(x);
            x.play();
        });
        $(document).on('click','.closeVideo', function () {
            var x = document.getElementById("videoPlayer");
            console.log(x);
            x.pause();
            $.closeModal()
        });





        $.init();

    });


    //输入框手机号位数判断，到11位则显示红色btn
    $("#phone_num").bind("input propertychange", function () {

        if($(this).val().length>10){
            $('.button-reserve').addClass('available')
        }else{
            $('.button-reserve').removeClass('available')
        }
        console.log($(this).val().length);//打印输入框字符长度

    });

</script>
</body>
</html>